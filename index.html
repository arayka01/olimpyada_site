<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartSite - AI –∫”©–º–µ–∫—à—ñ–ª—ñ –æ“õ—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Å—ã</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #99CDD8;
            --secondary: #FDFBD3;
            --accent: #657166;
            --success: #4cd964;
            --warning: #ffcc00;
            --danger: #ff3b30;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --gradient: linear-gradient(135deg, #99CDD8 0%, #657166 100%);
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --border-radius: 20px;
            --ai-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: var(--gradient);
            color: white;
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo h1 {
            font-size: 1.8rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .container {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            background: white;
            padding: 2rem 1rem;
            box-shadow: var(--shadow);
            position: relative;
            overflow-y: auto;
            max-height: calc(100vh - 80px);
        }

        .nav-item {
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-item.active {
            background: var(--gradient);
            color: white;
        }

        .nav-item:hover:not(.active) {
            background: rgba(153, 205, 216, 0.1);
        }

        .main-content {
            padding: 2rem;
            background: #f5f7fa;
            position: relative;
            overflow-y: auto;
            max-height: calc(100vh - 80px);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            position: relative;
        }

        .stat-card {
            text-align: center;
            border-left: 4px solid var(--primary);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin: 1rem 0;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
        }

        .btn-secondary {
            background: var(--secondary);
            color: var(--dark);
        }

        .btn-ai {
            background: var(--ai-gradient);
            color: white;
        }

        .task-list {
            list-style: none;
        }

        .task-item {
            padding: 1rem;
            border: 1px solid #e1e5e9;
            border-radius: 12px;
            margin: 0.5rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e1e5e9;
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 0.2rem;
        }

        .game-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .game-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .game-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 2rem;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .achievement {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(153, 205, 216, 0.1);
            border-radius: 12px;
            margin: 0.5rem 0;
        }

        .achievement-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        /* –ú–æ–¥–∞–ª—å–¥—ã —Ç–µ—Ä–µ–∑–µ–Ω—ñ“£ —Å—Ç–∏–ª—å–¥–µ—Ä—ñ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .lesson-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
        }

        .lesson-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .lesson-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .lesson-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .lesson-card.locked:hover {
            transform: none;
            border-color: transparent;
        }

        .question-container {
            margin: 1.5rem 0;
        }

        .question {
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .option {
            padding: 1rem;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: rgba(153, 205, 216, 0.1);
        }

        .option.selected {
            background: rgba(153, 205, 216, 0.2);
            border-color: var(--primary);
        }

        .option.correct {
            background: rgba(76, 217, 100, 0.2);
            border-color: var(--success);
        }

        .option.incorrect {
            background: rgba(255, 59, 48, 0.2);
            border-color: var(--danger);
        }

        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 1rem 0;
            color: var(--primary);
        }

        .map-container {
            width: 100%;
            height: 500px;
            background: #e9f7fb;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
            margin: 2rem 0;
        }

        .map-path {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 800 500"><path d="M50,250 C150,150 250,350 350,250 C450,150 550,350 650,250" stroke="%2399CDD8" stroke-width="8" fill="none" stroke-dasharray="10,5"/></svg>');
            background-repeat: no-repeat;
        }

        .map-node {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .map-node:hover {
            transform: scale(1.1);
        }

        .map-node.completed {
            background: var(--success);
            color: white;
        }

        .map-node.current {
            background: var(--primary);
            color: white;
            animation: pulse 2s infinite;
        }

        .map-node.locked {
            background: #ccc;
            color: #666;
            cursor: not-allowed;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .drag-container {
            display: flex;
            gap: 1rem;
            margin: 2rem 0;
        }

        .drag-source, .drag-target {
            flex: 1;
            min-height: 200px;
            border: 2px dashed var(--primary);
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .drag-item {
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            cursor: move;
            user-select: none;
        }

        .drag-item.dragging {
            opacity: 0.5;
        }

        .drag-target .drag-item {
            background: rgba(153, 205, 216, 0.2);
        }

        .game-area {
            margin: 2rem 0;
            padding: 2rem;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .puzzle-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .puzzle-piece {
            aspect-ratio: 1;
            background: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .puzzle-piece:hover {
            transform: scale(1.05);
        }

        .puzzle-piece.empty {
            background: #e1e5e9;
            cursor: default;
        }

        .puzzle-piece.empty:hover {
            transform: none;
        }

        .lesson-image {
            max-width: 100%;
            border-radius: 12px;
            margin: 1rem 0;
            box-shadow: var(--shadow);
        }

        .grade-section {
            margin-bottom: 2rem;
        }

        .grade-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary);
        }

        .points-display {
            text-align: center;
            font-size: 1.2rem;
            color: var(--primary);
            margin: 1rem 0;
            font-weight: bold;
        }

        .chart-container {
            width: 100%;
            height: 300px;
            margin: 2rem 0;
        }

        .daily-challenge {
            background: linear-gradient(135deg, #ffcc00 0%, #ff9900 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin: 1rem 0;
            text-align: center;
        }

        .game-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .sequence-game {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .sequence-step {
            padding: 1rem;
            background: white;
            border: 2px solid var(--primary);
            border-radius: 8px;
            cursor: move;
            user-select: none;
        }

        .sequence-step.dragging {
            opacity: 0.5;
        }

        .sequence-target {
            min-height: 100px;
            border: 2px dashed var(--primary);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .game-result {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .game-result.success {
            background: rgba(76, 217, 100, 0.1);
            border: 1px solid var(--success);
        }

        .game-result.error {
            background: rgba(255, 59, 48, 0.1);
            border: 1px solid var(--danger);
        }

        /* AI –∫”©–º–µ–∫—à—ñ —Å—Ç–∏–ª—å–¥–µ—Ä—ñ */
        .ai-assistant {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: var(--ai-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: all 0.3s ease;
        }

        .ai-assistant:hover {
            transform: scale(1.1);
        }

        .ai-chat {
            position: fixed;
            bottom: 8rem;
            right: 2rem;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            display: none;
            flex-direction: column;
            z-index: 101;
        }

        .ai-chat.active {
            display: flex;
        }

        .ai-header {
            background: var(--ai-gradient);
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ai-message {
            padding: 0.8rem;
            border-radius: 12px;
            max-width: 80%;
        }

        .ai-message.user {
            background: var(--primary);
            color: white;
            align-self: flex-end;
        }

        .ai-message.bot {
            background: #f1f1f1;
            color: var(--dark);
            align-self: flex-start;
        }

        .ai-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #e1e5e9;
        }

        .ai-input input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            margin-right: 0.5rem;
        }

        .ai-input button {
            background: var(--ai-gradient);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.8rem 1rem;
            cursor: pointer;
        }

        /* –ñ–∞“£–∞ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä —Å—Ç–∏–ª—å–¥–µ—Ä—ñ */
        .streak-counter {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 1rem 0;
        }

        .leaderboard {
            margin-top: 2rem;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #e1e5e9;
        }

        .leaderboard-rank {
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .vr-classroom {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 1rem 0;
        }

        .ar-preview {
            width: 100%;
            height: 200px;
            background: #f1f1f1;
            border-radius: 12px;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
        }

        .quiz-battle {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 1rem 0;
        }

        .voice-command {
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            color: var(--dark);
            padding: 1rem;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 1rem 0;
        }

        .microphone-btn {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            margin: 0 auto;
        }

        .personalized-path {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: var(--dark);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin: 1rem 0;
        }

        .adaptive-learning {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
        }

        .learning-card {
            flex: 1;
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
        }

        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        /* –ñ–∞“£–∞ AI —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã */
        .ai-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .ai-suggestion {
            background: rgba(153, 205, 216, 0.1);
            border: 1px solid var(--primary);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ai-suggestion:hover {
            background: var(--primary);
            color: white;
        }

        .ai-typing {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-style: italic;
        }

        .typing-dots {
            display: flex;
            gap: 0.2rem;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #666;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .ai-recommendations {
            margin-top: 2rem;
        }

        .recommendation-item {
            padding: 1rem;
            border-left: 4px solid var(--primary);
            background: rgba(153, 205, 216, 0.1);
            margin: 0.5rem 0;
            border-radius: 0 8px 8px 0;
        }

        /* –ñ–∞“£–∞ –æ“õ—É —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã */
        .flashcard-container {
            perspective: 1000px;
            width: 300px;
            height: 200px;
            margin: 2rem auto;
        }

        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 1rem;
            text-align: center;
        }

        .flashcard-front {
            background: var(--primary);
            color: white;
        }

        .flashcard-back {
            background: white;
            color: var(--dark);
            transform: rotateY(180deg);
        }

        .study-timer {
            text-align: center;
            margin: 2rem 0;
        }

        .timer-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: 1rem 0;
        }

        .timer-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        /* “ö–æ—Å—ã–º—à–∞ —Å—Ç–∏–ª—å–¥–µ—Ä */
        .drag-over {
            background: rgba(153, 205, 216, 0.2);
        }

        .correct-match {
            border: 2px solid var(--success) !important;
        }

        .incorrect-match {
            border: 2px solid var(--danger) !important;
        }

        .lesson-completed {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .adaptive-learning {
                flex-direction: column;
            }
            
            .ai-chat {
                width: 90%;
                right: 5%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <h1>üéì SmartSite - AI –∫”©–º–µ–∫—à—ñ–ª—ñ –æ“õ—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Å—ã</h1>
        </div>
        <div class="user-info">
            <div class="notification-bell">
                <i class="fas fa-bell"></i>
                <div class="notification-count">3</div>
            </div>
            <div class="user-avatar">
                <i class="fas fa-user-graduate"></i>
            </div>
            <div>
                <div id="studentName">–ê–π–≥“Ø–ª –°–∞“ì–∞—Ç–æ–≤–∞</div>
                <div style="font-size: 0.9rem; opacity: 0.8;">3-—Å—ã–Ω—ã–ø –æ“õ—É—à—ã—Å—ã</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="sidebar">
            <div class="nav-item active" onclick="showTab('dashboard')">
                <i class="fas fa-tachometer-alt"></i>
                <span>–ë–∞—Å—Ç—ã –±–µ—Ç</span>
            </div>
            <div class="nav-item" onclick="showTab('lessons')">
                <i class="fas fa-book"></i>
                <span>–°–∞–±–∞“õ—Ç–∞—Ä</span>
            </div>
            <div class="nav-item" onclick="showTab('tasks')">
                <i class="fas fa-tasks"></i>
                <span>–¢–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä</span>
            </div>
            <div class="nav-item" onclick="showTab('games')">
                <i class="fas fa-gamepad"></i>
                <span>–û–π—ã–Ω–¥–∞—Ä</span>
            </div>
            <div class="nav-item" onclick="showTab('ai-learning')">
                <i class="fas fa-robot"></i>
                <span>AI –æ“õ—ã—Ç—É</span>
            </div>
            <div class="nav-item" onclick="showTab('olympiads')">
                <i class="fas fa-trophy"></i>
                <span>–û–ª–∏–º–ø–∏–∞–¥–∞–ª–∞—Ä</span>
            </div>
            <div class="nav-item" onclick="showTab('achievements')">
                <i class="fas fa-medal"></i>
                <span>–ñ–µ—Ç—ñ—Å—Ç—ñ–∫—Ç–µ—Ä</span>
            </div>
            <div class="nav-item" onclick="showTab('progress')">
                <i class="fas fa-chart-line"></i>
                <span>”®—Å—É –µ—Å–µ–±—ñ</span>
            </div>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> –®—ã“ì—É
            </button>
        </div>

        <div class="main-content">
            <!-- –ë–∞—Å—Ç—ã –±–µ—Ç -->
            <div id="dashboard" class="tab-content active">
                <h2>–ñ–µ–∫–µ –∫–∞–±–∏–Ω–µ—Ç</h2>
                
                <div class="streak-counter">
                    <h3>üî• 7 –∫“Ø–Ω–¥—ñ–∫ —Å—Ç—Ä–∏–∫!</h3>
                    <p>–°—ñ–∑ 7 –∫“Ø–Ω –±–æ–π—ã “Ø–∑–±–µ–π –æ“õ—ã–ø –∂–∞—Ç—ã—Ä—Å—ã–∑. –¢–∞“ì—ã 3 –∫“Ø–Ω –∂”ô–Ω–µ —Å—ñ–∑ "–¢–µ–º—ñ—Ä –µ—Ä—ñ–∫" –º–µ–¥–∞–ª—ñ–Ω –∞–ª–∞—Å—ã–∑!</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card stat-card">
                        <i class="fas fa-star fa-2x"></i>
                        <div class="stat-number" id="totalPoints">150</div>
                        <div>–ñ–∏–Ω–∞–ª“ì–∞–Ω “±–ø–∞–π–ª–∞—Ä</div>
                    </div>
                    <div class="card stat-card">
                        <i class="fas fa-layer-group fa-2x"></i>
                        <div class="stat-number" id="studentLevel">3</div>
                        <div>–î–µ“£–≥–µ–π</div>
                    </div>
                    <div class="card stat-card">
                        <i class="fas fa-check-circle fa-2x"></i>
                        <div class="stat-number" id="completedTasks">8</div>
                        <div>–û—Ä—ã–Ω–¥–∞–ª“ì–∞–Ω —Ç–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä</div>
                    </div>
                    <div class="card stat-card">
                        <i class="fas fa-trophy fa-2x"></i>
                        <div class="stat-number" id="badgesCount">2</div>
                        <div>–ê–ª—ã–Ω“ì–∞–Ω –±–µ–ª–≥—ñ—à–µ–ª–µ—Ä</div>
                    </div>
                </div>

                <div class="daily-challenge">
                    <h3>üéØ –ö“Ø–Ω–¥–µ–ª—ñ–∫—Ç—ñ –º–∏—Å—Å–∏—è</h3>
                    <p>–ë“Ø–≥—ñ–Ω 3 —Å–∞–±–∞“õ—Ç—ã –∞—è“õ—Ç–∞–ø, 30 “±–ø–∞–π –∂–∏–Ω–∞“£—ã–∑!</p>
                    <button class="btn btn-primary" onclick="showTab('lessons')">–ú–∏—Å—Å–∏—è–Ω—ã –±–∞—Å—Ç–∞—É</button>
                </div>

                <div class="personalized-path">
                    <h3>üéØ –°—ñ–∑–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –æ“õ—É –∂–æ–ª—ã</h3>
                    <p>AI –∂“Ø–π–µ—Å—ñ —Å—ñ–∑–¥—ñ“£ –æ“õ—É —Å—Ç–∏–ª—ñ“£—ñ–∑–≥–µ —Å”ô–π–∫–µ—Å –∂–µ–∫–µ–ª–µ–Ω–¥—ñ—Ä—ñ–ª–≥–µ–Ω –æ“õ—É –∂–æ—Å–ø–∞—Ä—ã–Ω ”ô–∑—ñ—Ä–ª–µ–¥—ñ</p>
                    <div class="adaptive-learning">
                        <div class="learning-card">
                            <h4>–ö“Ø—à—Ç—ñ –∂–∞“õ—Ç–∞—Ä—ã“£—ã–∑</h4>
                            <p>–ê–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä –∂”ô–Ω–µ –ª–æ–≥–∏–∫–∞</p>
                        </div>
                        <div class="learning-card">
                            <h4>–ñ–µ—Ç—ñ–ª–¥—ñ—Ä—É –∫–µ—Ä–µ–∫</h4>
                            <p>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ</p>
                        </div>
                        <div class="learning-card">
                            <h4>–ö–µ–ª–µ—Å—ñ “õ–∞–¥–∞–º</h4>
                            <p>Scratch –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>–°–∞–±–∞“õ –∫–∞—Ä—Ç–∞—Å—ã</h3>
                    <div class="map-container">
                        <div class="map-path"></div>
                        <!-- –ö–∞—Ä—Ç–∞ —Ç“Ø–π—ñ–Ω–¥–µ—Ä—ñ –¥–∏–Ω–∞–º–∏–∫–∞–ª—ã“õ —Ç“Ø—Ä–¥–µ “õ–æ—Å—ã–ª–∞–¥—ã -->
                    </div>
                </div>

                <div class="leaderboard">
                    <h3>üèÜ –°—ã–Ω—ã–ø—Ç—ã“õ —Ä–µ–π—Ç–∏–Ω–≥</h3>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank">1</div>
                        <div>–ê–π–≥“Ø–ª –°–∞“ì–∞—Ç–æ–≤–∞</div>
                        <div style="margin-left: auto; font-weight: bold;">150 “±–ø–∞–π</div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank">2</div>
                        <div>–ê—Ä–º–∞–Ω –ñ“Ø–Ω—ñ—Å–æ–≤</div>
                        <div style="margin-left: auto;">145 “±–ø–∞–π</div>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-rank">3</div>
                        <div>“ö“±—Ä–∞–ª–∞–π –û—Ä–∞–∑–±–∞–π</div>
                        <div style="margin-left: auto;">130 “±–ø–∞–π</div>
                    </div>
                </div>
            </div>

            <!-- –°–∞–±–∞“õ—Ç–∞—Ä -->
            <div id="lessons" class="tab-content">
                <h2>–°–∞–±–∞“õ—Ç–∞—Ä</h2>
                
                <div class="vr-classroom">
                    <h3>üéÆ –í–∏—Ä—Ç—É–∞–ª–¥—ã —à—ã–Ω—ã“õ—Ç—ã—Ä—É –±”©–ª–º–µ—Å—ñ</h3>
                    <p>–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ —ñ—à–∫—ñ “õ“±—Ä—ã–ª—ã–º—ã–Ω 3D —Ñ–æ—Ä–º–∞—Ç—ã–Ω–¥–∞ –∑–µ—Ä—Ç—Ç–µ“£—ñ–∑</p>
                    <div class="ar-preview">
                        <i class="fas fa-vr-cardboard fa-3x"></i>
                        <p>VR —Ä–µ–∂–∏–º—ñ–Ω —ñ—Å–∫–µ “õ–æ—Å—É</p>
                    </div>
                    <button class="btn btn-primary" onclick="startVRClassroom()">VR —Å–∞–±–∞“ì—ã–Ω –±–∞—Å—Ç–∞—É</button>
                </div>
                
                <div class="card grade-section">
                    <h3 class="grade-title">1-—Å—ã–Ω—ã–ø —Å–∞–±–∞“õ—Ç–∞—Ä—ã</h3>
                    <div class="lesson-grid" id="grade1-lessons">
                        <!-- –°–∞–±–∞“õ—Ç–∞—Ä –¥–∏–Ω–∞–º–∏–∫–∞–ª—ã“õ —Ç“Ø—Ä–¥–µ “õ–æ—Å—ã–ª–∞–¥—ã -->
                    </div>
                </div>

                <div class="card grade-section">
                    <h3 class="grade-title">2-—Å—ã–Ω—ã–ø —Å–∞–±–∞“õ—Ç–∞—Ä—ã</h3>
                    <div class="lesson-grid" id="grade2-lessons">
                        <!-- –°–∞–±–∞“õ—Ç–∞—Ä –¥–∏–Ω–∞–º–∏–∫–∞–ª—ã“õ —Ç“Ø—Ä–¥–µ “õ–æ—Å—ã–ª–∞–¥—ã -->
                    </div>
                </div>

                <div class="card grade-section">
                    <h3 class="grade-title">3-—Å—ã–Ω—ã–ø —Å–∞–±–∞“õ—Ç–∞—Ä—ã</h3>
                    <div class="lesson-grid" id="grade3-lessons">
                        <!-- –°–∞–±–∞“õ—Ç–∞—Ä –¥–∏–Ω–∞–º–∏–∫–∞–ª—ã“õ —Ç“Ø—Ä–¥–µ “õ–æ—Å—ã–ª–∞–¥—ã -->
                    </div>
                </div>

                <div class="card grade-section">
                    <h3 class="grade-title">4-—Å—ã–Ω—ã–ø —Å–∞–±–∞“õ—Ç–∞—Ä—ã</h3>
                    <div class="lesson-grid" id="grade4-lessons">
                        <!-- –°–∞–±–∞“õ—Ç–∞—Ä –¥–∏–Ω–∞–º–∏–∫–∞–ª—ã“õ —Ç“Ø—Ä–¥–µ “õ–æ—Å—ã–ª–∞–¥—ã -->
                    </div>
                </div>
            </div>

            <!-- –¢–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä -->
            <div id="tasks" class="tab-content">
                <h2>–¢–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä</h2>
                
                <div class="voice-command">
                    <h3>üé§ –î–∞—É—ã—Å—Ç—ã“õ –±–∞—Å“õ–∞—Ä—É</h3>
                    <p>–¢–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä–¥—ã –¥–∞—É—ã—Å –∞—Ä“õ—ã–ª—ã —Ç–∞“£–¥–∞“£—ã–∑</p>
                    <div class="microphone-btn" onclick="toggleVoiceCommand()">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <p id="voice-status">–ú–∏–∫—Ä–æ—Ñ–æ–Ω–¥—ã —ñ—Å–∫–µ “õ–æ—Å—É “Ø—à—ñ–Ω –±–∞—Å—ã“£—ã–∑</p>
                </div>
                
                <div class="card">
                    <h3>1-—Å—ã–Ω—ã–ø —Ç–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä—ã</h3>
                    <div class="task-list">
                        <div class="task-item">
                            <div>
                                <strong>–ö–æ–º–ø—å—é—Ç–µ—Ä –±”©–ª—ñ–∫—Ç–µ—Ä—ñ–Ω —Ç–∞–Ω—É</strong>
                                <p>–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –Ω–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–∫—Ç–µ—Ä—ñ–Ω –∞—Ç–∞“£—ã–∑</p>
                                <small>10 “±–ø–∞–π ‚Ä¢ –ú”ô—Ç—ñ–Ω–¥—ñ–∫ –∂–∞—É–∞–ø</small>
                            </div>
                            <button class="btn btn-primary" onclick="startTask(1)">–û—Ä—ã–Ω–¥–∞—É</button>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <h3>2-—Å—ã–Ω—ã–ø —Ç–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä—ã</h3>
                    <div class="task-list">
                        <div class="task-item">
                            <div>
                                <strong>–ö–æ–º–ø—å—é—Ç–µ—Ä “õ“±—Ä—ã–ª“ì—ã–ª–∞—Ä—ã</strong>
                                <p>“ö–∞–π—Å—ã—Å—ã –µ–Ω–≥—ñ–∑—É “õ“±—Ä—ã–ª“ì—ã—Å—ã –µ–º–µ—Å?</p>
                                <small>15 “±–ø–∞–π ‚Ä¢ –¢–µ—Å—Ç</small>
                            </div>
                            <button class="btn btn-primary" onclick="startTask(2)">–û—Ä—ã–Ω–¥–∞—É</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –û–π—ã–Ω–¥–∞—Ä -->
            <div id="games" class="tab-content">
                <h2>–û“õ—É –æ–π—ã–Ω–¥–∞—Ä—ã</h2>
                
                <div class="quiz-battle">
                    <h3>‚öîÔ∏è –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —à–∞–π“õ–∞—Å—ã</h3>
                    <p>–°—ã–Ω—ã–ø—Ç–∞—Å—Ç–∞—Ä—ã“£—ã–∑–±–µ–Ω –±”ô–π–≥–µ–ª–µ—Å—ñ–ø, –±—ñ–ª—ñ–º—ñ“£—ñ–∑–¥—ñ —Å—ã–Ω–∞“£—ã–∑</p>
                    <button class="btn btn-primary" onclick="startQuizBattle()">–ë”ô–π–≥–µ–≥–µ “õ–æ—Å—ã–ª—É</button>
                </div>
                
                <div class="games-grid">
                    <div class="game-card" onclick="startGame(1)">
                        <div class="game-icon">üéØ</div>
                        <h3>–ö–æ–º–ø—å—é—Ç–µ—Ä –±”©–ª—ñ–∫—Ç–µ—Ä—ñ–Ω —Ç–∞–ø</h3>
                        <p>–ö–æ–º–ø—å—é—Ç–µ—Ä –±”©–ª—ñ–∫—Ç–µ—Ä—ñ–Ω —Å—É—Ä–µ—Ç—Ç–µ—Ä–º–µ–Ω —Å”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                        <div style="color: var(--primary); font-weight: bold;">15 “±–ø–∞–π</div>
                    </div>
                    <div class="game-card" onclick="startGame(2)">
                        <div class="game-icon">‚å®Ô∏è</div>
                        <h3>–ü–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞–Ω—ã “Ø–π—Ä–µ–Ω</h3>
                        <p>–ü–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞–¥–∞ —Ç–µ–∑ –∂–∞–∑—É“ì–∞ –∂–∞—Ç—Ç—ã“õ</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 50%"></div>
                        </div>
                        <div style="color: var(--primary); font-weight: bold;">20 “±–ø–∞–π</div>
                    </div>
                    <div class="game-card" onclick="startGame(3)">
                        <div class="game-icon">üß©</div>
                        <h3>–ê–ª–≥–æ—Ä–∏—Ç–º “õ“±—Ä–∞—Å—Ç—ã—Ä—É</h3>
                        <p>–ë–µ—Ä—ñ–ª–≥–µ–Ω —Ç–∞–ø—Å—ã—Ä–º–∞ “Ø—à—ñ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º “õ“±—Ä–∞—Å—Ç—ã—Ä</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 25%"></div>
                        </div>
                        <div style="color: var(--primary); font-weight: bold;">25 “±–ø–∞–π</div>
                    </div>
                    <div class="game-card" onclick="startGame(4)">
                        <div class="game-icon">üîç</div>
                        <h3>–ö–∏–±–µ—Ä“õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫</h3>
                        <p>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ–≥—ñ “õ–∞—É—ñ–ø—Ç–µ—Ä–¥—ñ —Ç–∞–Ω—ã–ø –±—ñ–ª—ñ“£—ñ–∑</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 40%"></div>
                        </div>
                        <div style="color: var(--primary); font-weight: bold;">30 “±–ø–∞–π</div>
                    </div>
                </div>
            </div>

            <!-- AI –æ“õ—ã—Ç—É -->
            <div id="ai-learning" class="tab-content">
                <h2>AI –æ“õ—ã—Ç—É –æ—Ä—Ç–∞–ª—ã“ì—ã</h2>
                
                <div class="card">
                    <h3>üß† –ñ–∞—Å–∞–Ω–¥—ã –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∫”©–º–µ–∫—à—ñ—Å—ñ</h3>
                    <p>AI –∫”©–º–µ–∫—à—ñ —Å—ñ–∑–≥–µ –∫“Ø—Ä–¥–µ–ª—ñ —Ç–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä–¥—ã —Ç“Ø—Å—ñ–Ω—É–≥–µ, —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –∂–∞—É–∞–ø –∞–ª—É“ì–∞ –∂”ô–Ω–µ –∂–µ–∫–µ–ª–µ–Ω–¥—ñ—Ä—ñ–ª–≥–µ–Ω –æ“õ—É –∂–æ—Å–ø–∞—Ä—ã–Ω –∞–ª—É“ì–∞ –∫”©–º–µ–∫—Ç–µ—Å–µ–¥—ñ.</p>
                    
                    <div class="adaptive-learning">
                        <div class="learning-card">
                            <i class="fas fa-comments fa-2x" style="color: var(--primary); margin-bottom: 1rem;"></i>
                            <h4>–°“±—Ä–∞“õ “õ–æ–π—ã“£—ã–∑</h4>
                            <p>–ö–µ–∑ –∫–µ–ª–≥–µ–Ω –æ“õ—É —Ç–∞“õ—ã—Ä—ã–±—ã –±–æ–π—ã–Ω—à–∞ —Å“±—Ä–∞“õ “õ–æ–π—ã“£—ã–∑</p>
                        </div>
                        <div class="learning-card">
                            <i class="fas fa-lightbulb fa-2x" style="color: var(--warning); margin-bottom: 1rem;"></i>
                            <h4>–¢“Ø—Å—ñ–Ω–¥—ñ—Ä–º–µ –∞–ª—ã“£—ã–∑</h4>
                            <p>–ö“Ø—Ä–¥–µ–ª—ñ —Ç–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä–¥—ã –∂–µ“£—ñ–ª —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç—ñ —Ç“Ø—Ä–¥–µ —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä—É</p>
                        </div>
                        <div class="learning-card">
                            <i class="fas fa-chart-line fa-2x" style="color: var(--success); margin-bottom: 1rem;"></i>
                            <h4>–û“õ—É –∂–æ—Å–ø–∞—Ä—ã</h4>
                            <p>–°—ñ–∑–¥—ñ“£ –±—ñ–ª—ñ–º –¥–µ“£–≥–µ–π—ñ“£—ñ–∑–≥–µ —Å–∞–π –∂–µ–∫–µ –æ“õ—É –∂–æ—Å–ø–∞—Ä—ã</p>
                        </div>
                    </div>
                    
                    <div class="ai-suggestions">
                        <div class="ai-suggestion" onclick="askAI('–ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–≥–µ–Ω –Ω–µ?')">–ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–≥–µ–Ω –Ω–µ?</div>
                        <div class="ai-suggestion" onclick="askAI('–ö–æ–º–ø—å—é—Ç–µ—Ä “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ?')">–ö–æ–º–ø—å—é—Ç–µ—Ä “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ?</div>
                        <div class="ai-suggestion" onclick="askAI('–ò–Ω—Ç–µ—Ä–Ω–µ—Ç “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ –Ω–µ–≥–µ –º–∞“£—ã–∑–¥—ã?')">–ò–Ω—Ç–µ—Ä–Ω–µ—Ç “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ –Ω–µ–≥–µ –º–∞“£—ã–∑–¥—ã?</div>
                        <div class="ai-suggestion" onclick="askAI('–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É –Ω–µ “Ø—à—ñ–Ω –∫–µ—Ä–µ–∫?')">–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É –Ω–µ “Ø—à—ñ–Ω –∫–µ—Ä–µ–∫?</div>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <h4>–ñ–∏—ñ “õ–æ–π—ã–ª–∞—Ç—ã–Ω —Å“±—Ä–∞“õ—Ç–∞—Ä:</h4>
                        <div class="task-list">
                            <div class="task-item">
                                <div>
                                    <strong>–ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–≥–µ–Ω –Ω–µ?</strong>
                                    <p>–ê–ª–≥–æ—Ä–∏—Ç–º–Ω—ñ“£ “õ–∞—Ä–∞–ø–∞–π—ã–º –∞–Ω—ã“õ—Ç–∞–º–∞—Å—ã–Ω –±—ñ–ª–≥—ñ–º –∫–µ–ª–µ–¥—ñ</p>
                                </div>
                                <button class="btn btn-ai" onclick="askAI('–ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–≥–µ–Ω –Ω–µ?')">AI-–¥–µ–Ω —Å“±—Ä–∞—É</button>
                            </div>
                            <div class="task-item">
                                <div>
                                    <strong>–ö–æ–º–ø—å—é—Ç–µ—Ä “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ?</strong>
                                    <p>–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –∂“±–º—ã—Å –ø—Ä–∏–Ω—Ü–∏–ø—ñ–Ω —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä—ñ“£—ñ–∑</p>
                                </div>
                                <button class="btn btn-ai" onclick="askAI('–ö–æ–º–ø—å—é—Ç–µ—Ä “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ?')">AI-–¥–µ–Ω —Å“±—Ä–∞—É</button>
                            </div>
                            <div class="task-item">
                                <div>
                                    <strong>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ –Ω–µ–≥–µ –º–∞“£—ã–∑–¥—ã?</strong>
                                    <p>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ “õ–∞—É—ñ–ø—Å—ñ–∑ –±–æ–ª—É –µ—Ä–µ–∂–µ–ª–µ—Ä—ñ</p>
                                </div>
                                <button class="btn btn-ai" onclick="askAI('–ò–Ω—Ç–µ—Ä–Ω–µ—Ç “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ –Ω–µ–≥–µ –º–∞“£—ã–∑–¥—ã?')">AI-–¥–µ–Ω —Å“±—Ä–∞—É</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 2rem;">
                    <h3>üìä –û“õ—É —Ç–∞–ª–¥–∞—É—ã</h3>
                    <p>AI –∂“Ø–π–µ—Å—ñ —Å—ñ–∑–¥—ñ“£ –æ“õ—É –∂–µ—Ç—ñ—Å—Ç—ñ–∫—Ç–µ—Ä—ñ“£—ñ–∑–¥—ñ —Ç–∞–ª–¥–∞–ø, –µ“£ —Ç–∏—ñ–º–¥—ñ –æ“õ—É ”ô–¥—ñ—Å—Ç–µ—Ä—ñ–Ω “±—Å—ã–Ω–∞–¥—ã:</p>
                    
                    <div class="chart-container">
                        <canvas id="learningAnalyticsChart"></canvas>
                    </div>
                    
                    <div class="adaptive-learning" style="margin-top: 2rem;">
                        <div class="learning-card">
                            <h4>–û“õ—É –∂—ã–ª–¥–∞–º–¥—ã“ì—ã</h4>
                            <div class="stat-number">85%</div>
                            <p>–û—Ä—Ç–∞—à–∞ –æ“õ—É –∂—ã–ª–¥–∞–º–¥—ã“ì—ã</p>
                        </div>
                        <div class="learning-card">
                            <h4>–¢“Ø—Å—ñ–Ω—É –¥–µ“£–≥–µ–π—ñ</h4>
                            <div class="stat-number">78%</div>
                            <p>–ú–∞—Ç–µ—Ä–∏–∞–ª–¥—ã —Ç“Ø—Å—ñ–Ω—É –¥–µ“£–≥–µ–π—ñ</p>
                        </div>
                        <div class="learning-card">
                            <h4>“∞—Å—ã–Ω—ã—Å</h4>
                            <p>–ö”©–±—ñ—Ä–µ–∫ –≤–∏–∑—É–∞–ª–¥—ã –º–∞—Ç–µ—Ä–∏–∞–ª–¥–∞—Ä–¥—ã “õ–æ–ª–¥–∞–Ω—ã“£—ã–∑</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <h3>üé¥ –ñ–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä—ã</h3>
                    <p>AI –∂–∞—Å–∞“ì–∞–Ω –∂–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä—ã–º–µ–Ω –º–∞—Ç–µ—Ä–∏–∞–ª–¥—ã —Ç–µ–∑ –∂–∞—Ç—Ç–∞“£—ã–∑:</p>
                    
                    <div class="flashcard-container">
                        <div class="flashcard" id="flashcard" onclick="flipCard()">
                            <div class="flashcard-front">
                                <h3>–ê–ª–≥–æ—Ä–∏—Ç–º</h3>
                            </div>
                            <div class="flashcard-back">
                                <p>–ê–ª–≥–æ—Ä–∏—Ç–º - –±–µ–ª–≥—ñ–ª—ñ –±—ñ—Ä –º”ô—Å–µ–ª–µ–Ω—ñ —à–µ—à—É “Ø—à—ñ–Ω “õ–∞–¥–∞–º–¥–∞—Ä —Ç—ñ–∑–±–µ–≥—ñ</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button class="btn btn-primary" onclick="nextCard()">–ö–µ–ª–µ—Å—ñ –∫–∞—Ä—Ç–æ—á–∫–∞</button>
                        <button class="btn btn-secondary" onclick="generateFlashcards()">–ñ–∞“£–∞ –∫–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä</button>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <h3>‚è±Ô∏è –û“õ—É —Ç–∞–π–º–µ—Ä—ñ</h3>
                    <p>–ü–æ–º–æ–¥–æ—Ä–æ ”ô–¥—ñ—Å—ñ –±–æ–π—ã–Ω—à–∞ –æ“õ—ã“£—ã–∑:</p>
                    
                    <div class="study-timer">
                        <div class="timer-display" id="studyTimer">25:00</div>
                        <div class="timer-controls">
                            <button class="btn btn-primary" onclick="startStudyTimer()">–ë–∞—Å—Ç–∞—É</button>
                            <button class="btn btn-secondary" onclick="pauseStudyTimer()">–¢–æ“õ—Ç–∞—Ç—É</button>
                            <button class="btn btn-secondary" onclick="resetStudyTimer()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –û–ª–∏–º–ø–∏–∞–¥–∞–ª–∞—Ä -->
            <div id="olympiads" class="tab-content">
                <h2>–û–ª–∏–º–ø–∏–∞–¥–∞–ª–∞—Ä</h2>
                <div class="card">
                    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ –æ–ª–∏–º–ø–∏–∞–¥–∞—Å—ã</h3>
                    <p><strong>–ö“Ø–Ω—ñ:</strong> 2024-12-15</p>
                    <p><strong>–°–∏–ø–∞—Ç—Ç–∞–º–∞:</strong> –ñ—ã–ª–¥—ã“õ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ –æ–ª–∏–º–ø–∏–∞–¥–∞—Å—ã</p>
                    <p><strong>“ö–∞—Ç—ã—Å—É “Ø—à—ñ–Ω “õ–∞–∂–µ—Ç:</strong> 100 “±–ø–∞–π</p>
                    <button class="btn btn-primary" onclick="joinOlympiad()">“ö–∞—Ç—ã—Å—É</button>
                </div>
            </div>

            <!-- –ñ–µ—Ç—ñ—Å—Ç—ñ–∫—Ç–µ—Ä -->
            <div id="achievements" class="tab-content">
                <h2>–ú–µ–Ω—ñ“£ –∂–µ—Ç—ñ—Å—Ç—ñ–∫—Ç–µ—Ä—ñ–º</h2>
                <div class="card">
                    <div class="achievement">
                        <div class="achievement-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <div>
                            <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ —à–µ–±–µ—Ä—ñ</h4>
                            <p>10 —Ç–∞–ø—Å—ã—Ä–º–∞–Ω—ã —Å”ô—Ç—Ç—ñ –æ—Ä—ã–Ω–¥–∞“ì–∞–Ω “Ø—à—ñ–Ω</p>
                        </div>
                    </div>
                    <div class="achievement">
                        <div class="achievement-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div>
                            <h4>–û“õ—É –º—ã–ª—Ç—ã“ì—ã</h4>
                            <p>100 “±–ø–∞–π –∂–∏–Ω–∞“ì–∞–Ω “Ø—à—ñ–Ω</p>
                        </div>
                    </div>
                    <div class="achievement">
                        <div class="achievement-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <div>
                            <h4>–û–π—ã–Ω —à–µ–±–µ—Ä—ñ</h4>
                            <p>5 –æ–π—ã–Ω–¥—ã —Å”ô—Ç—Ç—ñ –∞—è“õ—Ç–∞“ì–∞–Ω “Ø—à—ñ–Ω</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <h3>–ë–µ–ª–≥—ñ—à–µ–ª–µ—Ä</h3>
                    <div>
                        <span class="badge">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ —à–µ–±–µ—Ä—ñ</span>
                        <span class="badge">–û“õ—É –º—ã–ª—Ç—ã“ì—ã</span>
                        <span class="badge">–û–π—ã–Ω —à–µ–±–µ—Ä—ñ</span>
                        <span class="badge" style="background: #ccc; color: #666;">VR –∑–µ—Ä—Ç—Ç–µ—É—à—ñ—Å—ñ</span>
                        <span class="badge" style="background: #ccc; color: #666;">–¢–µ–º—ñ—Ä –µ—Ä—ñ–∫</span>
                    </div>
                </div>
            </div>

            <!-- ”®—Å—É –µ—Å–µ–±—ñ -->
            <div id="progress" class="tab-content">
                <h2>”®—Å—É –µ—Å–µ–±—ñ</h2>
                <div class="card">
                    <h3>–ê–π–ª—ã“õ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="dashboard-grid">
                        <div class="stat-card">
                            <div class="stat-number">12</div>
                            <div>–û—Ä—ã–Ω–¥–∞–ª“ì–∞–Ω —Ç–∞–ø—Å—ã—Ä–º–∞</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">8</div>
                            <div>–û–π–Ω–∞–ª“ì–∞–Ω –æ–π—ã–Ω</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">85%</div>
                            <div>–û—Ä—ã–Ω–¥–∞–ª—É –¥–µ“£–≥–µ–π—ñ</div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 2rem;">
                    <h3>“∞–ø–∞–π–ª–∞—Ä –¥–∏–Ω–∞–º–∏–∫–∞—Å—ã</h3>
                    <div class="chart-container">
                        <canvas id="pointsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI –∫”©–º–µ–∫—à—ñ —á–∞—Ç—ã -->
    <div class="ai-chat" id="aiChat">
        <div class="ai-header">
            <div>
                <h3>AI –û“õ—ã—Ç—É –ö”©–º–µ–∫—à—ñ—Å—ñ</h3>
                <p>–°—ñ–∑–≥–µ –∫”©–º–µ–∫—Ç–µ—Å—É–≥–µ –¥–∞–π—ã–Ω</p>
            </div>
            <i class="fas fa-times" onclick="closeAIChat()"></i>
        </div>
        <div class="ai-messages" id="aiMessages">
            <div class="ai-message bot">
                –°”ô–ª–µ–º–µ—Ç—Å—ñ–∑ –±–µ! –ú–µ–Ω —Å—ñ–∑–¥—ñ“£ AI –æ“õ—ã—Ç—É –∫”©–º–µ–∫—à—ñ—Å—ñ–Ω–º—ñ–Ω. –°—ñ–∑–≥–µ “õ–∞–Ω–¥–∞–π —Å–∞–±–∞“õ –±–æ–π—ã–Ω—à–∞ –∫”©–º–µ–∫ –∫–µ—Ä–µ–∫?
            </div>
        </div>
        <div class="ai-input">
            <input type="text" id="aiInput" placeholder="–ú“±–Ω–¥–∞ —Å“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑...">
            <button onclick="sendAIMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- AI –∫”©–º–µ–∫—à—ñ —Ç“Ø–π–º–µ—Å—ñ -->
    <div class="ai-assistant" onclick="toggleAIChat()">
        <i class="fas fa-robot"></i>
    </div>

    <!-- –°–∞–±–∞“õ –º–æ–¥–∞–ª—å–¥—ã —Ç–µ—Ä–µ–∑–µ—Å—ñ -->
    <div class="modal" id="lessonModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modalContent">
                <!-- –ú–æ–¥–∞–ª—å–¥—ã —Ç–µ—Ä–µ–∑–µ–Ω—ñ“£ –º–∞–∑–º“±–Ω—ã –¥–∏–Ω–∞–º–∏–∫–∞–ª—ã“õ —Ç“Ø—Ä–¥–µ —Ç–æ–ª—Ç—ã—Ä—ã–ª–∞–¥—ã -->
            </div>
        </div>
    </div>

    <script>
        // –ë–∞–∑–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ
        class Database {
            getUsers() {
                return JSON.parse(localStorage.getItem('users')) || {};
            }

            getTasks() {
                return JSON.parse(localStorage.getItem('tasks')) || {};
            }

            getGames() {
                return JSON.parse(localStorage.getItem('games')) || {};
            }

            getLessons() {
                return JSON.parse(localStorage.getItem('lessons')) || this.getDefaultLessons();
            }

            getStudentProgress() {
                return JSON.parse(localStorage.getItem('studentProgress')) || {
                    points: 150,
                    level: 3,
                    completedLessons: [1, 2, 3],
                    completedTasks: [1, 2, 3, 4, 5, 6, 7, 8],
                    unlockedAreas: ['grade1-area1', 'grade1-area2', 'grade2-area1', 'grade3-area1'],
                    dailyChallenges: [],
                    achievements: ['–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ —à–µ–±–µ—Ä—ñ', '–û“õ—É –º—ã–ª—Ç—ã“ì—ã'],
                    streak: 7
                };
            }

            updateStudentProgress(updates) {
                const progress = this.getStudentProgress();
                const newProgress = { ...progress, ...updates };
                localStorage.setItem('studentProgress', JSON.stringify(newProgress));
                return newProgress;
            }

            getDefaultLessons() {
                // –ë–∞—Ä–ª—ã“õ —Å—ã–Ω—ã–ø—Ç–∞—Ä“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω —Å–∞–±–∞“õ—Ç–∞—Ä–¥—ã“£ JSON –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ
                const lessons = {
                    grade1: [
                        {
                            id: 1,
                            title: "–ö–æ–º–ø—å—é—Ç–µ—Ä–º–µ–Ω —Ç–∞–Ω—ã—Å—É",
                            description: "–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –Ω–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–∫—Ç–µ—Ä—ñ–Ω —Ç–∞–Ω—É",
                            icon: "üñ•Ô∏è",
                            content: {
                                text: "–ö–æ–º–ø—å—é—Ç–µ—Ä - –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã “õ–∞–±—ã–ª–¥–∞–π—Ç—ã–Ω, —Å–∞“õ—Ç–∞–π—Ç—ã–Ω –∂”ô–Ω–µ ”©“£–¥–µ–π—Ç—ñ–Ω “õ“±—Ä—ã–ª“ì—ã. –ù–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–∫—Ç–µ—Ä—ñ: –º–æ–Ω–∏—Ç–æ—Ä, –ø–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞, —Ç—ñ–Ω—Ç—É—ñ—Ä, –∂“Ø–π–µ–ª—ñ–∫ –±–ª–æ–∫.",
                                image: "https://i.pinimg.com/736x/91/b5/ec/91b5ec76f945fab8d70c38a87b287ae2.jpg"
                            },
                            test: {
                                questions: [
                                    {
                                        question: "–≠–∫—Ä–∞–Ω–¥—ã “õ–∞–ª–∞–π –∞—Ç–∞–π–¥—ã?",
                                        options: ["–ü–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞", "–ú–æ–Ω–∏—Ç–æ—Ä", "–¢—ñ–Ω—Ç—É—ñ—Ä", "–ñ“Ø–π–µ–ª—ñ–∫ –±–ª–æ–∫"],
                                        correct: 1
                                    },
                                    {
                                        question: "–ë–∞—Å“õ–∞—Ä—É “Ø—à—ñ–Ω –Ω–µ “õ–∞–∂–µ—Ç?",
                                        options: ["–¢—ñ–Ω—Ç—É—ñ—Ä", "–ú–æ–Ω–∏—Ç–æ—Ä", "–ü—Ä–∏–Ω—Ç–µ—Ä", "–ñ“Ø–π–µ–ª—ñ–∫ –±–ª–æ–∫"],
                                        correct: 0
                                    }
                                ],
                                timeLimit: 60
                            },
                            game: {
                                type: "drag-drop",
                                title: "“ö“±—Ä—ã–ª“ì—ã–Ω—ã –æ—Ä–Ω—ã–Ω–∞ “õ–æ–π!",
                                items: [
                                    { id: 1, name: "–ú–æ–Ω–∏—Ç–æ—Ä", image: "https://i.pinimg.com/736x/91/b5/ec/91b5ec76f945fab8d70c38a87b287ae2.jpg" },
                                    { id: 2, name: "–ü–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞", image: "https://i.pinimg.com/736x/73/39/9b/73399b2d20749d1cca6d31c1c58cde06.jpg" }
                                ],
                                targets: [
                                    { id: 1, name: "–≠–∫—Ä–∞–Ω" },
                                    { id: 2, name: "–ñ–∞–∑—É “Ø—à—ñ–Ω" }
                                ],
                                correctMatches: {
                                    1: 1,
                                    2: 2
                                }
                            },
                            points: 10,
                            area: "grade1-area1"
                        },
                        {
                            id: 2,
                            title: "–ê“õ–ø–∞—Ä–∞—Ç –∂”ô–Ω–µ –æ–Ω—ã“£ —Ç“Ø—Ä–ª–µ—Ä—ñ",
                            description: "–ê“õ–ø–∞—Ä–∞—Ç—Ç—ã“£ —Ç“Ø—Ä–ª–µ—Ä—ñ–Ω —Ç–∞–Ω—É",
                            icon: "üìä",
                            content: {
                                text: "–ê“õ–ø–∞—Ä–∞—Ç - –∫”©—Ä–µ—Ç—ñ–Ω, –µ—Å—Ç–∏—Ç—ñ–Ω –∂”ô–Ω–µ —Å–µ–∑–µ—Ç—ñ–Ω –º”ô–ª—ñ–º–µ—Ç. –¢“Ø—Ä–ª–µ—Ä—ñ: –º”ô—Ç—ñ–Ω, —Å—É—Ä–µ—Ç, –¥—ã–±—ã—Å, –≤–∏–¥–µ–æ.",
                                image: "https://i.pinimg.com/736x/ce/bb/cf/cebbcf3deba993f1f2571086825b0e9f.jpg"
                            },
                            test: {
                                questions: [
                                    {
                                        question: "–ê“õ–ø–∞—Ä–∞—Ç –¥–µ–≥–µ–Ω –Ω–µ?",
                                        options: ["–ú”ô–ª—ñ–º–µ—Ç", "–û–π—ã–Ω—à—ã“õ", "“ö“±—Ä–∞–ª", "–¢–∞“ì–∞–º"],
                                        correct: 0
                                    },
                                    {
                                        question: "–ö”©—Ä—ñ–Ω–µ—Ç—ñ–Ω –∞“õ–ø–∞—Ä–∞—Ç —Ç“Ø—Ä—ñ?",
                                        options: ["–î—ã–±—ã—Å", "–ú”ô—Ç—ñ–Ω", "–°—É—Ä–µ—Ç", "–í–∏–¥–µ–æ"],
                                        correct: 2
                                    }
                                ],
                                timeLimit: 60
                            },
                            game: {
                                type: "puzzle",
                                title: "–ê“õ–ø–∞—Ä–∞—Ç —Ç“Ø—Ä—ñ–Ω —Ç–∞–ø!",
                                pieces: ["–ú”ô—Ç—ñ–Ω", "–°—É—Ä–µ—Ç", "–î—ã–±—ã—Å", "–í–∏–¥–µ–æ", "", "–ö—ñ—Ç–∞–ø", "“ö–∞–ª–∞–º", "“ö“±–ª–∞“õ", "–ö”©–∑"]
                            },
                            points: 15,
                            area: "grade1-area2"
                        }
                    ],
                    grade2: [
                        {
                            id: 3,
                            title: "–ö–æ–º–ø—å—é—Ç–µ—Ä “õ“±—Ä—ã–ª“ì—ã–ª–∞—Ä—ã",
                            description: "–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –Ω–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–∫—Ç–µ—Ä—ñ–Ω —Ç–∞–Ω—É",
                            icon: "üíª",
                            content: {
                                text: "–ú–æ–Ω–∏—Ç–æ—Ä, –ø–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞, —Ç—ñ–Ω—Ç—É—ñ—Ä, –∂“Ø–π–µ–ª—ñ–∫ –±–ª–æ–∫, –ø—Ä–∏–Ω—Ç–µ—Ä, —Å–∫–∞–Ω–µ—Ä - –∫–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –Ω–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–∫—Ç–µ—Ä—ñ.",
                                image: "https://i.pinimg.com/736x/8a/b7/dd/8ab7dd9fe3784049c8fb8cf16714d185.jpg"
                            },
                            test: {
                                questions: [
                                    {
                                        question: "–ú”ô—Ç—ñ–Ω–¥—ñ —Ç–µ—Ä—É–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω “õ“±—Ä—ã–ª“ì—ã?",
                                        options: ["–ü–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞", "–ú–æ–Ω–∏—Ç–æ—Ä", "–ü—Ä–∏–Ω—Ç–µ—Ä", "–¢—ñ–Ω—Ç—É—ñ—Ä"],
                                        correct: 0
                                    },
                                    {
                                        question: "–ë–∞—Å“õ–∞—Ä—É “Ø—à—ñ–Ω –Ω–µ “õ–∞–∂–µ—Ç?",
                                        options: ["–¢—ñ–Ω—Ç—É—ñ—Ä", "–ñ“Ø–π–µ–ª—ñ–∫ –±–ª–æ–∫", "–ü—Ä–∏–Ω—Ç–µ—Ä", "–ú–æ–Ω–∏—Ç–æ—Ä"],
                                        correct: 0
                                    }
                                ],
                                timeLimit: 60
                            },
                            game: {
                                type: "drag-drop",
                                title: "“ö–∞–π “õ“±—Ä—ã–ª“ì—ã –∂–æ“ì–∞–ª–¥—ã?",
                                items: [
                                    { id: 1, name: "–ú–æ–Ω–∏—Ç–æ—Ä", image: "https://i.pinimg.com/736x/91/b5/ec/91b5ec76f945fab8d70c38a87b287ae2.jpg" },
                                    { id: 2, name: "–ü–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞", image: "https://i.pinimg.com/736x/73/39/9b/73399b2d20749d1cca6d31c1c58cde06.jpg" }
                                ],
                                targets: [
                                    { id: 1, name: "–≠–∫—Ä–∞–Ω" },
                                    { id: 2, name: "–ñ–∞–∑—É “Ø—à—ñ–Ω" }
                                ],
                                correctMatches: {
                                    1: 1,
                                    2: 2
                                }
                            },
                            points: 15,
                            area: "grade2-area1"
                        }
                    ],
                    grade3: [
                        {
                            id: 4,
                            title: "–ö–æ–º–ø—å—é—Ç–µ—Ä “õ“±—Ä—ã–ª—ã–º—ã",
                            description: "–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ —ñ—à–∫—ñ “õ“±—Ä—ã–ª—ã–º—ã–Ω —Ç–∞–Ω—É",
                            icon: "üîß",
                            content: {
                                text: "–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –Ω–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–∫—Ç–µ—Ä—ñ: –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (–º–∏), RAM (—É–∞“õ—ã—Ç—à–∞ —Å–∞“õ—Ç–∞—É), HDD/SSD (“õ–∞—Ç—Ç—ã –¥–∏—Å–∫), —Ñ–∞–π–ª, –±—É–º–∞.",
                                image: "https://i.pinimg.com/736x/c8/06/ce/c806ce80e8ae546e053422c34bcfd209.jpg"
                            },
                            test: {
                                questions: [
                                    {
                                        question: "–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ ¬´–º–∏—ã¬ª “õ–∞–Ω–¥–∞–π?",
                                        options: ["–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä", "RAM", "HDD", "–ú–æ–Ω–∏—Ç–æ—Ä"],
                                        correct: 0
                                    },
                                    {
                                        question: "–£–∞“õ—ã—Ç—à–∞ —Å–∞“õ—Ç–∞—É “Ø—à—ñ–Ω –Ω–µ “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã?",
                                        options: ["HDD", "RAM", "–ú–æ–Ω–∏—Ç–æ—Ä", "–ü—Ä–∏–Ω—Ç–µ—Ä"],
                                        correct: 1
                                    }
                                ],
                                timeLimit: 60
                            },
                            game: {
                                type: "drag-drop",
                                title: "“ö–∞–π “õ“±—Ä—ã–ª“ì—ã “õ–∞–π–¥–∞?",
                                items: [
                                    { id: 1, name: "–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä", image: "https://i.pinimg.com/736x/c8/06/ce/c806ce80e8ae546e053422c34bcfd209.jpg" },
                                    { id: 2, name: "RAM", image: "https://i.pinimg.com/1200x/a3/16/b0/a316b05e2cc0a2999c6b5f049498306a.jpg" }
                                ],
                                targets: [
                                    { id: 1, name: "–ö–æ–º–ø—å—é—Ç–µ—Ä –º–∏—ã" },
                                    { id: 2, name: "–£–∞“õ—ã—Ç—à–∞ —Å–∞“õ—Ç–∞—É" }
                                ],
                                correctMatches: {
                                    1: 1,
                                    2: 2
                                }
                            },
                            points: 20,
                            area: "grade3-area1"
                        }
                    ],
                    grade4: [
                        {
                            id: 5,
                            title: "–ê–ª–≥–æ—Ä–∏—Ç–º –∂”ô–Ω–µ –æ—Ä—ã–Ω–¥–∞—É—à—ã",
                            description: "–ê–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä–¥—ñ “õ“±—Ä–∞—Å—Ç—ã—Ä—É –∂”ô–Ω–µ –æ—Ä—ã–Ω–¥–∞—É",
                            icon: "üî¢",
                            content: {
                                text: "–ê–ª–≥–æ—Ä–∏—Ç–º ‚Äî –±–µ–ª–≥—ñ–ª—ñ –±—ñ—Ä —Ç–∞–ø—Å—ã—Ä–º–∞–Ω—ã –æ—Ä—ã–Ω–¥–∞—É “Ø—à—ñ–Ω –∂–∞—Å–∞–ª“ì–∞–Ω –Ω–∞“õ—Ç—ã “õ–∞–¥–∞–º–¥–∞—Ä —Ç—ñ–∑–±–µ–≥—ñ.",
                                image: "https://i.pinimg.com/736x/c1/b9/ae/c1b9aedb453ddf992119b8353b61a18a.jpg"
                            },
                            test: {
                                questions: [
                                    {
                                        question: "–ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–≥–µ–Ω –Ω–µ?",
                                        options: ["–ö–µ–∑–¥–µ–π—Å–æ“õ ”ô—Ä–µ–∫–µ—Ç", "“ö–∞–¥–∞–º–¥–∞—Ä —Ç—ñ–∑–±–µ–≥—ñ", "–°—É—Ä–µ—Ç", "–ú—É–∑—ã–∫–∞"],
                                        correct: 1
                                    },
                                    {
                                        question: "–û—Ä—ã–Ω–¥–∞—É—à—ã –∫—ñ–º?",
                                        options: ["–†–æ–±–æ—Ç –Ω–µ–º–µ—Å–µ –∞–¥–∞–º", "–û–π—ã–Ω—à—ã“õ", "“Æ–π", "–ö—ñ—Ç–∞–ø"],
                                        correct: 0
                                    }
                                ],
                                timeLimit: 60
                            },
                            game: {
                                type: "sequence",
                                title: "–†–æ–±–æ—Ç—Ç—ã –±–∞“ì—ã—Ç—Ç–∞",
                                steps: [
                                    "–ê–ª“ì–∞ 2 “õ–∞–¥–∞–º",
                                    "–û“£“ì–∞ –±“±—Ä—ã–ª",
                                    "–ê–ª“ì–∞ 3 “õ–∞–¥–∞–º"
                                ]
                            },
                            points: 25,
                            area: "grade4-area1"
                        }
                    ]
                };
                
                localStorage.setItem('lessons', JSON.stringify(lessons));
                return lessons;
            }
        }

        const db = new Database();
        let currentStudent = null;
        let currentLesson = null;
        let testTimer = null;
        let timeLeft = 0;
        let studyTimer = null;
        let studyTimeLeft = 25 * 60; // 25 –º–∏–Ω—É—Ç
        let isStudyTimerRunning = false;
        let currentFlashcardIndex = 0;
        let flashcards = [];

        // –ë–µ—Ç –∂“Ø–∫—Ç–µ–ª–≥–µ–Ω–¥–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadStudentData();
            loadLessons();
            loadMap();
            initChart();
            initLearningAnalytics();
            generateFlashcards();
            
            // Enter –ø–µ—Ä–Ω–µ—Å—ñ–º–µ–Ω AI —Ö–∞–±–∞—Ä–ª–∞–º–∞—Å—ã–Ω –∂—ñ–±–µ—Ä—É
            document.getElementById('aiInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendAIMessage();
                }
            });
        });

        // –û“õ—É—à—ã –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–Ω –∂“Ø–∫—Ç–µ—É
        function loadStudentData() {
            const userData = localStorage.getItem('currentUser');
            if (userData) {
                currentStudent = JSON.parse(userData);
                document.getElementById('studentName').textContent = currentStudent.full_name;
            } else {
                // –ï–≥–µ—Ä –æ“õ—É—à—ã –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ –∂–æ“õ –±–æ–ª—Å–∞, –¥–µ–º–æ —Ä–µ–∂–∏–º–¥–µ –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ
                currentStudent = {
                    full_name: "–ê–π–≥“Ø–ª –°–∞“ì–∞—Ç–æ–≤–∞",
                    points: 150,
                    level: 3
                };
                document.getElementById('studentName').textContent = currentStudent.full_name;
            }
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–Ω—ã –∂–∞“£–∞—Ä—Ç—É
            const progress = db.getStudentProgress();
            document.getElementById('totalPoints').textContent = progress.points || 0;
            document.getElementById('studentLevel').textContent = progress.level || 1;
            document.getElementById('completedTasks').textContent = progress.completedTasks ? progress.completedTasks.length : 0;
            document.getElementById('badgesCount').textContent = progress.achievements ? progress.achievements.length : 0;
        }

        // –°–∞–±–∞“õ—Ç–∞—Ä–¥—ã –∂“Ø–∫—Ç–µ—É
        function loadLessons() {
            const lessons = db.getLessons();
            const progress = db.getStudentProgress();
            
            // –ë–∞—Ä–ª—ã“õ —Å—ã–Ω—ã–ø—Ç–∞—Ä “Ø—à—ñ–Ω —Å–∞–±–∞“õ—Ç–∞—Ä–¥—ã –∂“Ø–∫—Ç–µ—É
            for (let grade = 1; grade <= 4; grade++) {
                const gradeContainer = document.getElementById(`grade${grade}-lessons`);
                if (!gradeContainer) continue;
                
                gradeContainer.innerHTML = '';
                
                const gradeLessons = lessons[`grade${grade}`] || [];
                
                gradeLessons.forEach(lesson => {
                    const isCompleted = progress.completedLessons.includes(lesson.id);
                    const isUnlocked = progress.unlockedAreas.includes(lesson.area);
                    
                    const lessonCard = document.createElement('div');
                    lessonCard.className = `lesson-card ${isUnlocked ? '' : 'locked'}`;
                    lessonCard.innerHTML = `
                        <div class="lesson-icon">${lesson.icon}</div>
                        <h3>${lesson.title}</h3>
                        <p>${lesson.description}</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${isCompleted ? '100%' : '0%'}"></div>
                        </div>
                        <div style="color: var(--primary); font-weight: bold;">${lesson.points} “±–ø–∞–π</div>
                        ${isCompleted ? '<div class="lesson-completed"><i class="fas fa-check"></i></div>' : ''}
                    `;
                    
                    if (isUnlocked) {
                        lessonCard.onclick = () => openLesson(lesson);
                    } else {
                        lessonCard.onclick = () => alert('–ë“±–ª —Å–∞–±–∞“õ ”ô–ª—ñ “õ–æ–ª–∂–µ—Ç—ñ–º–¥—ñ –µ–º–µ—Å! –ê–ª–¥—ã“£“ì—ã —Å–∞–±–∞“õ—Ç–∞—Ä–¥—ã –∞—è“õ—Ç–∞“£—ã–∑.');
                    }
                    
                    gradeContainer.appendChild(lessonCard);
                });
            }
        }

        // –ö–∞—Ä—Ç–∞–Ω—ã –∂“Ø–∫—Ç–µ—É
        function loadMap() {
            const mapContainer = document.querySelector('.map-container');
            const mapPath = mapContainer.querySelector('.map-path');
            
            // –ï—Å–∫—ñ —Ç“Ø–π—ñ–Ω–¥–µ—Ä–¥—ñ —Ç–∞–∑–∞–ª–∞—É
            const oldNodes = mapContainer.querySelectorAll('.map-node');
            oldNodes.forEach(node => node.remove());
            
            // –ö–∞—Ä—Ç–∞ —Ç“Ø–π—ñ–Ω–¥–µ—Ä—ñ–Ω “õ–æ—Å—É
            const lessons = db.getLessons();
            const progress = db.getStudentProgress();
            
            let nodeIndex = 0;
            
            // –ë–∞—Ä–ª—ã“õ —Å—ã–Ω—ã–ø—Ç–∞—Ä–¥—ã“£ —Å–∞–±–∞“õ—Ç–∞—Ä—ã–Ω –∫–∞—Ä—Ç–∞“ì–∞ “õ–æ—Å—É
            for (let grade = 1; grade <= 4; grade++) {
                const gradeLessons = lessons[`grade${grade}`] || [];
                
                gradeLessons.forEach((lesson, index) => {
                    const node = document.createElement('div');
                    node.className = 'map-node';
                    
                    const isCompleted = progress.completedLessons.includes(lesson.id);
                    const isCurrent = !isCompleted && (
                        index === 0 || 
                        progress.completedLessons.includes(gradeLessons[index-1].id)
                    );
                    
                    if (isCompleted) {
                        node.classList.add('completed');
                    } else if (isCurrent) {
                        node.classList.add('current');
                    } else {
                        node.classList.add('locked');
                    }
                    
                    node.innerHTML = lesson.icon;
                    node.style.left = `${15 + nodeIndex * 15}%`;
                    node.style.top = `${40 + Math.sin(nodeIndex) * 30}%`;
                    
                    if (!node.classList.contains('locked')) {
                        node.onclick = () => openLesson(lesson);
                    } else {
                        node.onclick = () => alert('–ë“±–ª —Å–∞–±–∞“õ ”ô–ª—ñ “õ–æ–ª–∂–µ—Ç—ñ–º–¥—ñ –µ–º–µ—Å! –ê–ª–¥—ã“£“ì—ã —Å–∞–±–∞“õ—Ç–∞—Ä–¥—ã –∞—è“õ—Ç–∞“£—ã–∑.');
                    }
                    
                    mapContainer.appendChild(node);
                    nodeIndex++;
                });
            }
        }

        // –ì—Ä–∞—Ñ–∏–∫—Ç—ñ –±–∞–ø—Ç–∞—É
        function initChart() {
            const ctx = document.getElementById('pointsChart');
            if (!ctx) return;
            
            const data = {
                labels: ['–î“Ø–π—Å–µ–Ω–±—ñ', '–°–µ–π—Å–µ–Ω–±—ñ', '–°”ô—Ä—Å–µ–Ω–±—ñ', '–ë–µ–π—Å–µ–Ω–±—ñ', '–ñ“±–º–∞', '–°–µ–Ω–±—ñ', '–ñ–µ–∫—Å–µ–Ω–±—ñ'],
                datasets: [{
                    label: '“∞–ø–∞–π–ª–∞—Ä',
                    data: [10, 25, 35, 50, 65, 80, 95],
                    borderColor: '#99CDD8',
                    backgroundColor: 'rgba(153, 205, 216, 0.2)',
                    tension: 0.4,
                    fill: true
                }]
            };
            
            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '–ê–ø—Ç–∞–ª—ã“õ “±–ø–∞–π –¥–∏–Ω–∞–º–∏–∫–∞—Å—ã'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            };
            
            new Chart(ctx, config);
        }

        // –û“õ—É –∞–Ω–∞–ª–∏—Ç–∏–∫–∞—Å—ã –≥—Ä–∞—Ñ–∏–≥—ñ
        function initLearningAnalytics() {
            const ctx = document.getElementById('learningAnalyticsChart');
            if (!ctx) return;
            
            const data = {
                labels: ['–î“Ø–π—Å–µ–Ω–±—ñ', '–°–µ–π—Å–µ–Ω–±—ñ', '–°”ô—Ä—Å–µ–Ω–±—ñ', '–ë–µ–π—Å–µ–Ω–±—ñ', '–ñ“±–º–∞', '–°–µ–Ω–±—ñ', '–ñ–µ–∫—Å–µ–Ω–±—ñ'],
                datasets: [
                    {
                        label: '–û“õ—É —É–∞“õ—ã—Ç—ã (–º–∏–Ω—É—Ç)',
                        data: [45, 60, 30, 75, 90, 45, 30],
                        borderColor: '#99CDD8',
                        backgroundColor: 'rgba(153, 205, 216, 0.2)',
                        yAxisID: 'y',
                    },
                    {
                        label: '–ñ–µ—Ç—ñ—Å—Ç—ñ–∫ –¥–µ“£–≥–µ–π—ñ (%)',
                        data: [65, 70, 60, 80, 85, 75, 70],
                        borderColor: '#4cd964',
                        backgroundColor: 'rgba(76, 217, 100, 0.2)',
                        yAxisID: 'y1',
                    }
                ]
            };
            
            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false,
                            },
                        },
                    }
                }
            };
            
            new Chart(ctx, config);
        }

        // –°–∞–±–∞“õ—Ç—ã –∞—à—É
        function openLesson(lesson) {
            currentLesson = lesson;
            const modal = document.getElementById('lessonModal');
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <h2>${lesson.title}</h2>
                <div class="lesson-content">
                    <p>${lesson.content.text}</p>
                    ${lesson.content.image ? `<img src="${lesson.content.image}" class="lesson-image">` : ''}
                </div>
                <div class="points-display">–ë“±–ª —Å–∞–±–∞“õ—Ç—ã –∞—è“õ—Ç–∞“ì–∞–Ω —Å–æ“£: ${lesson.points} “±–ø–∞–π –∞–ª–∞—Å—ã–∑!</div>
                <div style="display: flex; gap: 1rem; margin: 2rem 0;">
                    <button class="btn btn-primary" onclick="startTest()">–¢–µ—Å—Ç—Ç—ñ –±–∞—Å—Ç–∞—É</button>
                    <button class="btn btn-secondary" onclick="startGameInModal()">–û–π—ã–Ω–¥—ã –æ–π–Ω–∞—É</button>
                </div>
            `;
            
            modal.classList.add('active');
        }

        // –¢–µ—Å—Ç—Ç—ñ –±–∞—Å—Ç–∞—É
        function startTest() {
            if (!currentLesson || !currentLesson.test) return;
            
            const modalContent = document.getElementById('modalContent');
            const test = currentLesson.test;
            
            let testHTML = `
                <h2>${currentLesson.title} - –¢–µ—Å—Ç</h2>
                <div class="timer" id="testTimer">${test.timeLimit} —Å–µ–∫—É–Ω–¥</div>
            `;
            
            test.questions.forEach((question, qIndex) => {
                testHTML += `
                    <div class="question-container">
                        <div class="question">${qIndex + 1}. ${question.question}</div>
                        <div class="options" id="options-${qIndex}">
                `;
                
                question.options.forEach((option, oIndex) => {
                    testHTML += `
                        <div class="option" onclick="selectAnswer(${qIndex}, ${oIndex})">
                            ${option}
                        </div>
                    `;
                });
                
                testHTML += `
                        </div>
                    </div>
                `;
            });
            
            testHTML += `
                <button class="btn btn-primary" onclick="submitTest()" style="margin-top: 2rem;">–¢–µ—Å—Ç—Ç—ñ –∞—è“õ—Ç–∞—É</button>
            `;
            
            modalContent.innerHTML = testHTML;
            
            // –¢–∞–π–º–µ—Ä–¥—ñ –±–∞—Å—Ç–∞—É
            timeLeft = test.timeLimit;
            updateTimer();
            testTimer = setInterval(updateTimer, 1000);
        }

        // –¢–∞–π–º–µ—Ä–¥—ñ –∂–∞“£–∞—Ä—Ç—É
        function updateTimer() {
            const timerElement = document.getElementById('testTimer');
            if (!timerElement) {
                clearInterval(testTimer);
                return;
            }
            
            timeLeft--;
            timerElement.textContent = `${timeLeft} —Å–µ–∫—É–Ω–¥`;
            
            if (timeLeft <= 0) {
                clearInterval(testTimer);
                submitTest();
            }
        }

        // –ñ–∞—É–∞–ø—Ç—ã —Ç–∞“£–¥–∞—É
        function selectAnswer(questionIndex, optionIndex) {
            const options = document.querySelectorAll(`#options-${questionIndex} .option`);
            options.forEach(option => option.classList.remove('selected'));
            options[optionIndex].classList.add('selected');
        }

        // –¢–µ—Å—Ç—Ç—ñ –∞—è“õ—Ç–∞—É
        function submitTest() {
            clearInterval(testTimer);
            
            if (!currentLesson || !currentLesson.test) return;
            
            const test = currentLesson.test;
            let score = 0;
            let totalQuestions = test.questions.length;
            
            test.questions.forEach((question, qIndex) => {
                const selectedOption = document.querySelector(`#options-${qIndex} .option.selected`);
                if (selectedOption) {
                    const optionIndex = Array.from(selectedOption.parentNode.children).indexOf(selectedOption);
                    if (optionIndex === question.correct) {
                        score++;
                        selectedOption.classList.add('correct');
                    } else {
                        selectedOption.classList.add('incorrect');
                        // –î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç—ã –∫”©—Ä—Å–µ—Ç—É
                        const correctOption = document.querySelector(`#options-${qIndex} .option:nth-child(${question.correct + 1})`);
                        correctOption.classList.add('correct');
                    }
                } else {
                    // –ï–≥–µ—Ä –∂–∞—É–∞–ø —Ç–∞“£–¥–∞–ª–º–∞“ì–∞–Ω –±–æ–ª—Å–∞, –¥“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç—ã –∫”©—Ä—Å–µ—Ç—É
                    const correctOption = document.querySelector(`#options-${qIndex} .option:nth-child(${question.correct + 1})`);
                    correctOption.classList.add('correct');
                }
            });
            
            const percentage = (score / totalQuestions) * 100;
            const passed = percentage >= 70;
            
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML += `
                <div class="game-result ${passed ? 'success' : 'error'}">
                    <h3>–¢–µ—Å—Ç –Ω”ô—Ç–∏–∂–µ—Å—ñ: ${score}/${totalQuestions} (${percentage.toFixed(0)}%)</h3>
                    <p>${passed ? '–°—ñ–∑ —Ç–µ—Å—Ç—Ç—ñ —Ç–∞–ø—Å—ã—Ä–¥—ã“£—ã–∑! üéâ' : '–°—ñ–∑ —Ç–µ—Å—Ç—Ç—ñ —Ç–∞–ø—Å—ã—Ä–∞ –∞–ª–º–∞–¥—ã“£—ã–∑. “ö–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑.'}</p>
                </div>
            `;
            
            if (passed) {
                // “∞–ø–∞–π “õ–æ—Å—É –∂”ô–Ω–µ —Å–∞–±–∞“õ—Ç—ã –∞—è“õ—Ç–∞–ª“ì–∞–Ω –¥–µ–ø –±–µ–ª–≥—ñ–ª–µ—É
                const progress = db.getStudentProgress();
                if (!progress.completedLessons.includes(currentLesson.id)) {
                    const newPoints = progress.points + currentLesson.points;
                    const newCompletedLessons = [...progress.completedLessons, currentLesson.id];
                    
                    // –ö–µ–ª–µ—Å—ñ –∞–π–º–∞“õ—Ç—ã –∞—à—É
                    let newUnlockedAreas = [...progress.unlockedAreas];
                    const nextArea = getNextArea(currentLesson.area);
                    if (nextArea && !newUnlockedAreas.includes(nextArea)) {
                        newUnlockedAreas.push(nextArea);
                    }
                    
                    db.updateStudentProgress({
                        points: newPoints,
                        completedLessons: newCompletedLessons,
                        unlockedAreas: newUnlockedAreas
                    });
                    
                    loadStudentData();
                    loadLessons();
                    loadMap();
                }
                
                modalContent.innerHTML += `
                    <div class="game-controls">
                        <button class="btn btn-primary" onclick="startGameInModal()" style="margin-top: 1rem;">–û–π—ã–Ω“ì–∞ ”©—Ç—É</button>
                        <button class="btn btn-secondary" onclick="closeModal()" style="margin-top: 1rem;">–°–∞–±–∞“õ—Ç—ã –∂–∞–±—É</button>
                    </div>
                `;
            } else {
                modalContent.innerHTML += `
                    <div class="game-controls">
                        <button class="btn btn-secondary" onclick="startTest()" style="margin-top: 1rem;">–¢–µ—Å—Ç—Ç—ñ “õ–∞–π—Ç–∞–ª–∞—É</button>
                        <button class="btn btn-primary" onclick="closeModal()" style="margin-top: 1rem;">–°–∞–±–∞“õ“õ–∞ –æ—Ä–∞–ª—É</button>
                    </div>
                `;
            }
        }

        // –ö–µ–ª–µ—Å—ñ –∞–π–º–∞“õ—Ç—ã –∞–Ω—ã“õ—Ç–∞—É
        function getNextArea(currentArea) {
            const areas = {
                'grade1-area1': 'grade1-area2',
                'grade1-area2': 'grade2-area1',
                'grade2-area1': 'grade3-area1',
                'grade3-area1': 'grade3-area2',
                'grade3-area2': 'grade4-area1'
            };
            
            return areas[currentArea];
        }

        // –ú–æ–¥–∞–ª—å–¥—ã —Ç–µ—Ä–µ–∑–µ–¥–µ –æ–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É
        function startGameInModal() {
            if (!currentLesson || !currentLesson.game) return;
            
            const modalContent = document.getElementById('modalContent');
            const game = currentLesson.game;
            
            let gameHTML = `
                <h2>${currentLesson.title} - ${game.title}</h2>
            `;
            
            if (game.type === 'drag-drop') {
                gameHTML += `
                    <div class="game-area">
                        <p>–°—É—Ä–µ—Ç—Ç–µ—Ä–¥—ñ –æ–ª–∞—Ä–¥—ã“£ —Å–∏–ø–∞—Ç—Ç–∞–º–∞–ª–∞—Ä—ã–º–µ–Ω —Å”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—ñ“£—ñ–∑:</p>
                        <div class="drag-container">
                            <div class="drag-source" id="dragSource">
                                ${game.items.map(item => `
                                    <div class="drag-item" draggable="true" data-id="${item.id}">
                                        ${item.image ? `<img src="${item.image}" style="max-width: 100px; max-height: 80px; display: block; margin: 0 auto;">` : ''}
                                        <div style="text-align: center; margin-top: 0.5rem;">${item.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="drag-target" id="dragTarget">
                                ${game.targets.map(target => `
                                    <div class="drag-item" data-target-id="${target.id}">
                                        <div style="text-align: center;">${target.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="game-controls">
                            <button class="btn btn-primary" onclick="checkDragDrop()">–¢–µ–∫—Å–µ—Ä—É</button>
                            <button class="btn btn-secondary" onclick="resetDragDrop()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                        </div>
                    </div>
                `;
            } else if (game.type === 'puzzle') {
                // –ü–∞–∑–ª –±”©–ª—à–µ–∫—Ç–µ—Ä—ñ–Ω –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É
                const shuffledPieces = [...game.pieces].sort(() => Math.random() - 0.5);
                
                gameHTML += `
                    <div class="game-area">
                        <p>–°”©–∑–¥–µ—Ä–¥—ñ –¥“±—Ä—ã—Å –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—ã“£—ã–∑:</p>
                        <div class="puzzle-container" id="puzzleContainer">
                            ${shuffledPieces.map((piece, index) => `
                                <div class="puzzle-piece ${piece === '' ? 'empty' : ''}" data-piece="${piece}" onclick="movePuzzlePiece(${index})">
                                    ${piece}
                                </div>
                            `).join('')}
                        </div>
                        <div class="game-controls">
                            <button class="btn btn-primary" onclick="checkPuzzle()">–¢–µ–∫—Å–µ—Ä—É</button>
                            <button class="btn btn-secondary" onclick="resetPuzzle()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                        </div>
                    </div>
                `;
            } else if (game.type === 'sequence') {
                // “ö–∞–¥–∞–º–¥–∞—Ä–¥—ã –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É
                const shuffledSteps = [...game.steps].sort(() => Math.random() - 0.5);
                
                gameHTML += `
                    <div class="game-area">
                        <p>“ö–∞–¥–∞–º–¥–∞—Ä–¥—ã –¥“±—Ä—ã—Å —Ä–µ—Ç–ø–µ–Ω –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—ã“£—ã–∑:</p>
                        <div class="sequence-game">
                            <div id="sequenceSource">
                                ${shuffledSteps.map(step => `
                                    <div class="sequence-step" draggable="true">${step}</div>
                                `).join('')}
                            </div>
                            <div class="sequence-target" id="sequenceTarget">
                                –ë–æ—Å –æ—Ä—ã–Ω
                            </div>
                        </div>
                        <div class="game-controls">
                            <button class="btn btn-primary" onclick="checkSequence()">–¢–µ–∫—Å–µ—Ä—É</button>
                            <button class="btn btn-secondary" onclick="resetSequence()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                        </div>
                    </div>
                `;
            }
            
            modalContent.innerHTML = gameHTML;
            
            // Drag and drop —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã–Ω –±–∞–ø—Ç–∞—É
            if (game.type === 'drag-drop' || game.type === 'sequence') {
                setupDragAndDrop();
            }
        }

        // Drag and drop —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã–Ω –±–∞–ø—Ç–∞—É
        function setupDragAndDrop() {
            const dragItems = document.querySelectorAll('.drag-item[draggable="true"], .sequence-step');
            
            dragItems.forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
            });
            
            const dropTargets = document.querySelectorAll('.drag-target, .sequence-target');
            
            dropTargets.forEach(target => {
                target.addEventListener('dragover', handleDragOver);
                target.addEventListener('drop', handleDrop);
                target.addEventListener('dragenter', handleDragEnter);
                target.addEventListener('dragleave', handleDragLeave);
            });
        }

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.textContent);
            e.target.classList.add('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            const data = e.dataTransfer.getData('text/plain');
            const draggedElement = document.querySelector('.dragging');
            
            if (draggedElement && e.target.classList.contains('drag-target')) {
                // –≠–ª–µ–º–µ–Ω—Ç—Ç—ñ –Ω—ã—Å–∞–Ω–∞“ì–∞ “õ–æ—Å—É
                e.target.appendChild(draggedElement);
                draggedElement.classList.remove('dragging');
            } else if (draggedElement && e.target.classList.contains('sequence-target')) {
                // –¢—ñ–∑–±–µ–∫ –æ–π—ã–Ω—ã “Ø—à—ñ–Ω
                e.target.appendChild(draggedElement);
                draggedElement.classList.remove('dragging');
            }
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.target.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.target.classList.remove('drag-over');
        }

        // Drag and drop –æ–π—ã–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É
        function checkDragDrop() {
            if (!currentLesson || !currentLesson.game) return;
            
            const game = currentLesson.game;
            const correctMatches = game.correctMatches;
            let correctCount = 0;
            
            const targetItems = document.querySelectorAll('.drag-target .drag-item');
            
            targetItems.forEach(target => {
                const targetId = parseInt(target.dataset.targetId);
                const item = target.querySelector('.drag-item[draggable="true"]');
                
                if (item) {
                    const itemId = parseInt(item.dataset.id);
                    
                    if (correctMatches[itemId] === targetId) {
                        correctCount++;
                        target.classList.add('correct-match');
                    } else {
                        target.classList.add('incorrect-match');
                    }
                } else {
                    target.classList.add('incorrect-match');
                }
            });
            
            const totalMatches = Object.keys(correctMatches).length;
            const passed = correctCount === totalMatches;
            
            showGameResult(passed, correctCount, totalMatches);
        }

        // Drag and drop –æ–π—ã–Ω—ã–Ω “õ–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É
        function resetDragDrop() {
            const dragSource = document.getElementById('dragSource');
            const dragTarget = document.getElementById('dragTarget');
            
            // –ë–∞—Ä–ª—ã“õ —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ –±–∞—Å—Ç–∞–ø“õ—ã –æ—Ä–Ω—ã–Ω–∞ “õ–∞–π—Ç–∞—Ä—É
            const items = dragTarget.querySelectorAll('.drag-item[draggable="true"]');
            items.forEach(item => {
                dragSource.appendChild(item);
                item.classList.remove('correct-match', 'incorrect-match');
            });
        }

        // –ü–∞–∑–ª –æ–π—ã–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É
        function checkPuzzle() {
            if (!currentLesson || !currentLesson.game) return;
            
            const game = currentLesson.game;
            const puzzleContainer = document.getElementById('puzzleContainer');
            const pieces = puzzleContainer.querySelectorAll('.puzzle-piece');
            let correctCount = 0;
            
            pieces.forEach((piece, index) => {
                if (piece.dataset.piece === game.pieces[index]) {
                    correctCount++;
                    piece.style.background = 'var(--success)';
                } else {
                    piece.style.background = 'var(--danger)';
                }
            });
            
            const totalPieces = game.pieces.filter(p => p !== '').length;
            const passed = correctCount === totalPieces;
            
            showGameResult(passed, correctCount, totalPieces);
        }

        // –ü–∞–∑–ª –æ–π—ã–Ω—ã–Ω “õ–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É
        function resetPuzzle() {
            const game = currentLesson.game;
            const puzzleContainer = document.getElementById('puzzleContainer');
            
            // –ü–∞–∑–ª –±”©–ª—à–µ–∫—Ç–µ—Ä—ñ–Ω –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É
            const shuffledPieces = [...game.pieces].sort(() => Math.random() - 0.5);
            
            puzzleContainer.innerHTML = '';
            shuffledPieces.forEach((piece, index) => {
                const pieceElement = document.createElement('div');
                pieceElement.className = `puzzle-piece ${piece === '' ? 'empty' : ''}`;
                pieceElement.dataset.piece = piece;
                pieceElement.textContent = piece;
                pieceElement.onclick = () => movePuzzlePiece(index);
                pieceElement.style.background = piece === '' ? '#e1e5e9' : 'var(--primary)';
                puzzleContainer.appendChild(pieceElement);
            });
        }

        // –ü–∞–∑–ª –±”©–ª—à–µ–≥—ñ–Ω –∂—ã–ª–∂—ã—Ç—É
        function movePuzzlePiece(index) {
            const puzzleContainer = document.getElementById('puzzleContainer');
            const pieces = puzzleContainer.querySelectorAll('.puzzle-piece');
            const emptyIndex = Array.from(pieces).findIndex(p => p.classList.contains('empty'));
            
            // –¢–µ–∫ –∫”©—Ä—à—ñ–ª–µ—Å –±”©–ª—à–µ–∫—Ç–µ—Ä–¥—ñ –∂—ã–ª–∂—ã—Ç—É“ì–∞ –±–æ–ª–∞–¥—ã
            const isAdjacent = 
                index === emptyIndex - 1 || 
                index === emptyIndex + 1 || 
                index === emptyIndex - 3 || 
                index === emptyIndex + 3;
            
            if (isAdjacent) {
                // –ë”©–ª—à–µ–∫—Ç–µ—Ä–¥—ñ –∞—É—ã—Å—Ç—ã—Ä—É
                const temp = pieces[index].textContent;
                pieces[index].textContent = pieces[emptyIndex].textContent;
                pieces[emptyIndex].textContent = temp;
                
                // –ö–ª–∞—Å—Å—Ç–∞—Ä–¥—ã –∞—É—ã—Å—Ç—ã—Ä—É
                pieces[index].classList.toggle('empty');
                pieces[emptyIndex].classList.toggle('empty');
                
                // –î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∂–∞“£–∞—Ä—Ç—É
                pieces[index].dataset.piece = pieces[index].textContent;
                pieces[emptyIndex].dataset.piece = pieces[emptyIndex].textContent;
            }
        }

        // –¢—ñ–∑–±–µ–∫ –æ–π—ã–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É
        function checkSequence() {
            if (!currentLesson || !currentLesson.game) return;
            
            const game = currentLesson.game;
            const sequenceTarget = document.getElementById('sequenceTarget');
            const steps = sequenceTarget.querySelectorAll('.sequence-step');
            let correctCount = 0;
            
            steps.forEach((step, index) => {
                if (step.textContent === game.steps[index]) {
                    correctCount++;
                    step.style.border = '2px solid var(--success)';
                } else {
                    step.style.border = '2px solid var(--danger)';
                }
            });
            
            const totalSteps = game.steps.length;
            const passed = correctCount === totalSteps;
            
            showGameResult(passed, correctCount, totalSteps);
        }

        // –¢—ñ–∑–±–µ–∫ –æ–π—ã–Ω—ã–Ω “õ–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É
        function resetSequence() {
            const game = currentLesson.game;
            const sequenceSource = document.getElementById('sequenceSource');
            const sequenceTarget = document.getElementById('sequenceTarget');
            
            // –ë–∞—Ä–ª—ã“õ —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ –±–∞—Å—Ç–∞–ø“õ—ã –æ—Ä–Ω—ã–Ω–∞ “õ–∞–π—Ç–∞—Ä—É
            const steps = sequenceTarget.querySelectorAll('.sequence-step');
            steps.forEach(step => {
                sequenceSource.appendChild(step);
                step.style.border = '2px solid var(--primary)';
            });
            
            // “ö–∞–¥–∞–º–¥–∞—Ä–¥—ã –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É
            const shuffledSteps = [...game.steps].sort(() => Math.random() - 0.5);
            sequenceSource.innerHTML = '';
            shuffledSteps.forEach(step => {
                const stepElement = document.createElement('div');
                stepElement.className = 'sequence-step';
                stepElement.draggable = true;
                stepElement.textContent = step;
                sequenceSource.appendChild(stepElement);
            });
            
            // Drag and drop —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã–Ω “õ–∞–π—Ç–∞ –±–∞–ø—Ç–∞—É
            setupDragAndDrop();
        }

        // –û–π—ã–Ω –Ω”ô—Ç–∏–∂–µ—Å—ñ–Ω –∫”©—Ä—Å–µ—Ç—É
        function showGameResult(passed, correctCount, totalCount) {
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML += `
                <div class="game-result ${passed ? 'success' : 'error'}">
                    <h3>–û–π—ã–Ω –Ω”ô—Ç–∏–∂–µ—Å—ñ: ${correctCount}/${totalCount}</h3>
                    <p>${passed ? '–°—ñ–∑ –æ–π—ã–Ω–¥—ã —Ç–∞–ø—Å—ã—Ä–¥—ã“£—ã–∑! üéâ' : '“ö–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑.'}</p>
                </div>
            `;
            
            if (passed) {
                // “∞–ø–∞–π “õ–æ—Å—É
                const progress = db.getStudentProgress();
                const newPoints = progress.points + 5; // –û–π—ã–Ω “Ø—à—ñ–Ω “õ–æ—Å—ã–º—à–∞ “±–ø–∞–π
                db.updateStudentProgress({ points: newPoints });
                loadStudentData();
                
                modalContent.innerHTML += `
                    <div class="game-controls">
                        <button class="btn btn-primary" onclick="closeModal()">–°–∞–±–∞“õ—Ç—ã –∂–∞–±—É</button>
                    </div>
                `;
            } else {
                modalContent.innerHTML += `
                    <div class="game-controls">
                        <button class="btn btn-secondary" onclick="startGameInModal()">–û–π—ã–Ω–¥—ã “õ–∞–π—Ç–∞–ª–∞—É</button>
                        <button class="btn btn-primary" onclick="closeModal()">–°–∞–±–∞“õ“õ–∞ –æ—Ä–∞–ª—É</button>
                    </div>
                `;
            }
        }

        // AI –∫”©–º–µ–∫—à—ñ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function toggleAIChat() {
            const aiChat = document.getElementById('aiChat');
            aiChat.classList.toggle('active');
        }

        function closeAIChat() {
            document.getElementById('aiChat').classList.remove('active');
        }

        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (message) {
                addAIMessage(message, 'user');
                input.value = '';
                
                // AI –∂–∞—É–∞–±—ã–Ω –∏–º–∏—Ç–∞—Ü–∏—è–ª–∞—É
                setTimeout(() => {
                    const aiResponse = generateAIResponse(message);
                    addAIMessage(aiResponse, 'bot');
                }, 1000);
            }
        }

        function addAIMessage(text, sender) {
            const messagesContainer = document.getElementById('aiMessages');
            const messageElement = document.createElement('div');
            messageElement.className = `ai-message ${sender}`;
            messageElement.textContent = text;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(question) {
            const responses = {
                '–∞–ª–≥–æ—Ä–∏—Ç–º': '–ê–ª–≥–æ—Ä–∏—Ç–º - –±“±–ª –±–µ–ª–≥—ñ–ª—ñ –±—ñ—Ä –º”ô—Å–µ–ª–µ–Ω—ñ —à–µ—à—É “Ø—à—ñ–Ω “õ–∞–¥–∞–º–¥–∞—Ä —Ç—ñ–∑–±–µ–≥—ñ. –ú—ã—Å–∞–ª—ã, —Ç–∞–º–∞“õ –¥–∞–π—ã–Ω–¥–∞—É, –æ—Ä—ã–Ω–¥—ã —Ç–∞–±—É –∂–æ–ª—ã - –±”ô—Ä—ñ –∞–ª–≥–æ—Ä–∏—Ç–º –±–æ–ª—ã–ø —Ç–∞–±—ã–ª–∞–¥—ã.',
                '–∫–æ–º–ø—å—é—Ç–µ—Ä': '–ö–æ–º–ø—å—é—Ç–µ—Ä - –±“±–ª –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã “õ–∞–±—ã–ª–¥–∞–π—Ç—ã–Ω, —Å–∞“õ—Ç–∞–π—Ç—ã–Ω –∂”ô–Ω–µ ”©“£–¥–µ–π—Ç—ñ–Ω “õ“±—Ä—ã–ª“ì—ã. –û–Ω—ã“£ –Ω–µ–≥—ñ–∑–≥—ñ –±”©–ª—ñ–∫—Ç–µ—Ä—ñ: –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –∂–∞–¥, –µ–Ω–≥—ñ–∑—É/—à—ã“ì–∞—Ä—É “õ“±—Ä—ã–ª“ì—ã–ª–∞—Ä—ã.',
                '–∏–Ω—Ç–µ—Ä–Ω–µ—Ç': '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç - –±“±–ª ”ô–ª–µ–º–¥—ñ–∫ –∞“õ–ø–∞—Ä–∞—Ç –∂–µ–ª—ñ—Å—ñ. –û–ª –∞—Ä“õ—ã–ª—ã –±—ñ–∑ –∞“õ–ø–∞—Ä–∞—Ç –∞–ª–º–∞—Å–∞, –±–µ–π–Ω–µ –∫”©—Ä–µ, —Ö–∞–±–∞—Ä–ª–∞—Å–∞ –∞–ª–∞–º—ã–∑.',
                '–±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É': '–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É - –±“±–ª –∫–æ–º–ø—å—é—Ç–µ—Ä–≥–µ –±–µ–ª–≥—ñ–ª—ñ –±—ñ—Ä —Ç–∞–ø—Å—ã—Ä–º–∞–Ω—ã –æ—Ä—ã–Ω–¥–∞—É “Ø—à—ñ–Ω –Ω“±—Å“õ–∞—É–ª–∞—Ä –±–µ—Ä—É –ø—Ä–æ—Ü–µ—Å—ñ.',
                '“õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫': '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç “õ–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–≥—ñ - –∂–µ–∫–µ –∞“õ–ø–∞—Ä–∞—Ç—ã“£—ã–∑–¥—ã “õ–æ—Ä“ì–∞—É –∂”ô–Ω–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ “õ–∞—É—ñ–ø—Å—ñ–∑ –±–æ–ª—É –µ—Ä–µ–∂–µ–ª–µ—Ä—ñ.',
                '–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä': '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä - –∫–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –º–∏—ã –¥–µ–ø –∞—Ç–∞–ª–∞–¥—ã. –û–ª –±–∞—Ä–ª—ã“õ –µ—Å–µ–ø—Ç–µ—É–ª–µ—Ä –º–µ–Ω –æ–ø–µ—Ä–∞—Ü–∏—è–ª–∞—Ä–¥—ã –æ—Ä—ã–Ω–¥–∞–π–¥—ã.',
                '–∂–∞–¥': '–ñ–∞–¥ - –∫–æ–º–ø—å—é—Ç–µ—Ä–¥–µ–≥—ñ –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã —Å–∞“õ—Ç–∞–π—Ç—ã–Ω –±”©–ª—ñ–∫. –û–ª –µ–∫—ñ —Ç“Ø—Ä–ª—ñ: RAM (—É–∞“õ—ã—Ç—à–∞ –∂–∞–¥) –∂”ô–Ω–µ ROM (—Ç“±—Ä–∞“õ—Ç—ã –∂–∞–¥).',
                '“õ“±—Ä—ã–ª“ì—ã': '–ö–æ–º–ø—å—é—Ç–µ—Ä “õ“±—Ä—ã–ª“ì—ã–ª–∞—Ä—ã –µ–∫—ñ–≥–µ –±”©–ª—ñ–Ω–µ–¥—ñ: –µ–Ω–≥—ñ–∑—É “õ“±—Ä—ã–ª“ì—ã–ª–∞—Ä—ã (–ø–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞, —Ç—ñ–Ω—Ç—É—ñ—Ä) –∂”ô–Ω–µ —à—ã“ì–∞—Ä—É “õ“±—Ä—ã–ª“ì—ã–ª–∞—Ä—ã (–º–æ–Ω–∏—Ç–æ—Ä, –ø—Ä–∏–Ω—Ç–µ—Ä).'
            };
            
            const lowerQuestion = question.toLowerCase();
            
            for (const [key, value] of Object.entries(responses)) {
                if (lowerQuestion.includes(key)) {
                    return value;
                }
            }
            
            return '–ë“±–ª —Ç–∞“õ—ã—Ä—ã–ø –±–æ–π—ã–Ω—à–∞ –∫–µ–ª–µ—Å—ñ –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã –±–µ—Ä–µ –∞–ª–∞–º—ã–Ω: ' + question + '. –ë“±–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞–Ω—ã“£ –º–∞“£—ã–∑–¥—ã —Ç–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä—ã–Ω—ã“£ –±—ñ—Ä—ñ. –û–Ω—ã —Ç“Ø—Å—ñ–Ω—É “Ø—à—ñ–Ω –±—ñ–∑–¥—ñ“£ —Å–∞–±–∞“õ—Ç–∞—Ä–¥—ã –æ“õ—ã–ø –∫”©—Ä—ñ“£—ñ–∑.';
        }

        function askAI(question) {
            toggleAIChat();
            setTimeout(() => {
                document.getElementById('aiInput').value = question;
                sendAIMessage();
            }, 500);
        }

        // –î–∞—É—ã—Å—Ç—ã“õ –±–∞—Å“õ–∞—Ä—É —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function toggleVoiceCommand() {
            const status = document.getElementById('voice-status');
            const microphone = document.querySelector('.microphone-btn i');
            
            if (microphone.classList.contains('fa-microphone')) {
                microphone.classList.remove('fa-microphone');
                microphone.classList.add('fa-microphone-slash');
                status.textContent = '–î–∞—É—ã—Å—Ç—ã“õ –±–∞—Å“õ–∞—Ä—É —ñ—Å–∫–µ “õ–æ—Å—ã–ª–¥—ã';
                startVoiceRecognition();
            } else {
                microphone.classList.remove('fa-microphone-slash');
                microphone.classList.add('fa-microphone');
                status.textContent = '–ú–∏–∫—Ä–æ—Ñ–æ–Ω–¥—ã —ñ—Å–∫–µ “õ–æ—Å—É “Ø—à—ñ–Ω –±–∞—Å—ã“£—ã–∑';
                stopVoiceRecognition();
            }
        }

        function startVoiceRecognition() {
            // –î–∞—É—ã—Å—Ç—ã“õ —Ç–∞–Ω—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω –∏–º–∏—Ç–∞—Ü–∏—è–ª–∞—É
            console.log('–î–∞—É—ã—Å—Ç—ã“õ —Ç–∞–Ω—É —ñ—Å–∫–µ “õ–æ—Å—ã–ª–¥—ã');
            // –®—ã–Ω–∞–π—ã –∂“Ø–∑–µ–≥–µ –∞—Å—ã—Ä—É “Ø—à—ñ–Ω Web Speech API “õ–æ–ª–¥–∞–Ω—É“ì–∞ –±–æ–ª–∞–¥—ã
        }

        function stopVoiceRecognition() {
            console.log('–î–∞—É—ã—Å—Ç—ã“õ —Ç–∞–Ω—É —Ç–æ“õ—Ç–∞—Ç—ã–ª–¥—ã');
        }

        // VR –∂”ô–Ω–µ AR —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function startVRClassroom() {
            alert('VR —Å–∞–±–∞“ì—ã –±–∞—Å—Ç–∞–ª–∞–¥—ã! –ë“±–ª —Ñ—É–Ω–∫—Ü–∏—è —Ç–æ–ª—ã“õ –Ω“±—Å“õ–∞–¥–∞ “õ–æ–ª–∂–µ—Ç—ñ–º–¥—ñ –±–æ–ª–∞–¥—ã.');
        }

        // –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —à–∞–π“õ–∞—Å—ã
        function startQuizBattle() {
            alert('–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —à–∞–π“õ–∞—Å—ã –±–∞—Å—Ç–∞–ª–∞–¥—ã! –°—ã–Ω—ã–ø—Ç–∞—Å—Ç–∞—Ä—ã“£—ã–∑–±–µ–Ω –±”ô–π–≥–µ–ª–µ—Å—ñ“£—ñ–∑.');
        }

        // –ñ–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä—ã —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function generateFlashcards() {
            flashcards = [
                { front: "–ê–ª–≥–æ—Ä–∏—Ç–º", back: "–ë–µ–ª–≥—ñ–ª—ñ –±—ñ—Ä –º”ô—Å–µ–ª–µ–Ω—ñ —à–µ—à—É “Ø—à—ñ–Ω “õ–∞–¥–∞–º–¥–∞—Ä —Ç—ñ–∑–±–µ–≥—ñ" },
                { front: "–ö–æ–º–ø—å—é—Ç–µ—Ä", back: "–ê“õ–ø–∞—Ä–∞—Ç—Ç—ã “õ–∞–±—ã–ª–¥–∞–π—Ç—ã–Ω, —Å–∞“õ—Ç–∞–π—Ç—ã–Ω –∂”ô–Ω–µ ”©“£–¥–µ–π—Ç—ñ–Ω “õ“±—Ä—ã–ª“ì—ã" },
                { front: "–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä", back: "–ö–æ–º–ø—å—é—Ç–µ—Ä–¥—ñ“£ –º–∏—ã, –±–∞—Ä–ª—ã“õ –µ—Å–µ–ø—Ç–µ—É–ª–µ—Ä –º–µ–Ω –æ–ø–µ—Ä–∞—Ü–∏—è–ª–∞—Ä–¥—ã –æ—Ä—ã–Ω–¥–∞–π–¥—ã" },
                { front: "–ñ–∞–¥", back: "–ö–æ–º–ø—å—é—Ç–µ—Ä–¥–µ–≥—ñ –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã —Å–∞“õ—Ç–∞–π—Ç—ã–Ω –±”©–ª—ñ–∫" },
                { front: "–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞", back: "–ö–æ–º–ø—å—é—Ç–µ—Ä–≥–µ –æ—Ä—ã–Ω–¥–∞—É “Ø—à—ñ–Ω –±–µ—Ä—ñ–ª–≥–µ–Ω –Ω“±—Å“õ–∞—É–ª–∞—Ä –∂–∏—ã–Ω—Ç—ã“ì—ã" }
            ];
            currentFlashcardIndex = 0;
            showFlashcard();
        }

        function showFlashcard() {
            if (flashcards.length === 0) return;
            
            const flashcard = document.getElementById('flashcard');
            const currentCard = flashcards[currentFlashcardIndex];
            
            flashcard.querySelector('.flashcard-front h3').textContent = currentCard.front;
            flashcard.querySelector('.flashcard-back p').textContent = currentCard.back;
            
            // –ö–∞—Ä—Ç–æ—á–∫–∞–Ω—ã –∞–ª–¥—ã“£“ì—ã –∂–∞“ì—ã–Ω–∞ “õ–∞–π—Ç–∞—Ä—É
            flashcard.classList.remove('flipped');
        }

        function flipCard() {
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.toggle('flipped');
        }

        function nextCard() {
            currentFlashcardIndex = (currentFlashcardIndex + 1) % flashcards.length;
            showFlashcard();
        }

        // –û“õ—É —Ç–∞–π–º–µ—Ä—ñ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function startStudyTimer() {
            if (isStudyTimerRunning) return;
            
            isStudyTimerRunning = true;
            studyTimer = setInterval(updateStudyTimer, 1000);
        }

        function pauseStudyTimer() {
            isStudyTimerRunning = false;
            clearInterval(studyTimer);
        }

        function resetStudyTimer() {
            pauseStudyTimer();
            studyTimeLeft = 25 * 60; // 25 –º–∏–Ω—É—Ç
            updateStudyTimerDisplay();
        }

        function updateStudyTimer() {
            if (studyTimeLeft <= 0) {
                pauseStudyTimer();
                alert('–û“õ—É —É–∞“õ—ã—Ç—ã –∞—è“õ—Ç–∞–ª–¥—ã! –î–µ–º–∞–ª—É —É–∞“õ—ã—Ç—ã.');
                return;
            }
            
            studyTimeLeft--;
            updateStudyTimerDisplay();
        }

        function updateStudyTimerDisplay() {
            const minutes = Math.floor(studyTimeLeft / 60);
            const seconds = studyTimeLeft % 60;
            document.getElementById('studyTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // –ú–æ–¥–∞–ª—å–¥—ã —Ç–µ—Ä–µ–∑–µ–Ω—ñ –∂–∞–±—É
        function closeModal() {
            document.getElementById('lessonModal').classList.remove('active');
        }

        // –¢–∞–±—Ç–∞—Ä–¥—ã –∞—É—ã—Å—Ç—ã—Ä—É
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // –¢–∞–ø—Å—ã—Ä–º–∞–Ω—ã –±–∞—Å—Ç–∞—É
        function startTask(taskId) {
            alert(`–¢–∞–ø—Å—ã—Ä–º–∞ #${taskId} –±–∞—Å—Ç–∞–ª–∞–¥—ã!`);
            // –ú“±–Ω–¥–∞ —Ç–∞–ø—Å—ã—Ä–º–∞–Ω—ã –æ—Ä—ã–Ω–¥–∞—É –ª–æ–≥–∏–∫–∞—Å—ã –±–æ–ª–∞–¥—ã
        }

        // –û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É
        function startGame(gameId) {
            alert(`–û–π—ã–Ω #${gameId} –±–∞—Å—Ç–∞–ª–∞–¥—ã!`);
            // –ú“±–Ω–¥–∞ –æ–π—ã–Ω–¥—ã –æ—Ä—ã–Ω–¥–∞—É –ª–æ–≥–∏–∫–∞—Å—ã –±–æ–ª–∞–¥—ã
        }

        // –û–ª–∏–º–ø–∏–∞–¥–∞“ì–∞ “õ–∞—Ç—ã—Å—É
        function joinOlympiad() {
            if (currentStudent.points >= 100) {
                window.open('https://aray367.github.io/Olimpyada/', '_blank');
            } else {
                alert('–û–ª–∏–º–ø–∏–∞–¥–∞“ì–∞ “õ–∞—Ç—ã—Å—É “Ø—à—ñ–Ω –∫–µ–º—ñ–Ω–¥–µ 100 “±–ø–∞–π –∂–∏–Ω–∞—É –∫–µ—Ä–µ–∫!');
            }
        }

        // –ñ“Ø–π–µ–¥–µ–Ω —à—ã“ì—É
        function logout() {
            localStorage.removeItem('currentUser');
            alert('–°—ñ–∑ –∂“Ø–π–µ–¥–µ–Ω —à—ã“õ—Ç—ã“£—ã–∑!');
            // –®—ã“ì—É –ª–æ–≥–∏–∫–∞—Å—ã
        }
    </script>
</body>
</html>
